{
    "assignee": null,
    "body": "Further to previous problems, I went through them and still have not found a way to get if the user online. \r\nThe last code I tried was:\r\n\r\nfunction onPresenceReceived($mynumber, $from, $type)\r\n{\r\n    echo \"\\n\\nReceived presence from $from. He/she is now $type\\n\\n\";\r\n}\r\n$w = new WhatsProt($username, $identity, $nickname, $debug);\r\n$w->eventManager()->bind(\"onGetPresence\", \"onPresenceReceived\");\r\n\r\n\r\n$w->connect();\r\n$w->loginWithPassword($password);\r\n//$w->sendClientConfig();\r\n//$w->sendGetServerProperties();\r\n//$w->SendPresenceSubscription($target);\r\n\r\n$w->PollMessages();\r\n$w->SendPresenceSubscription($target);\r\n\r\nfor($i = 0; $i < 5; $i++)\r\n{\r\n    $w->PollMessages();\r\n}\r\n\r\n\r\nand it doesnt work anymore .\r\n\r\nsomeone can help me pls ?\r\n\r\nThanks !\r\n\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "body": "Important: I found a way to get the \"Last Seen\", but it is only updated when the user disconnects from whatsapp. \r\nI am looking for a way to get the moment it connects, or check whether it is online now.\r\n\r\nThank you!",
            "created_at": "2014-10-07T10:16:54Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1005#issuecomment-58163796",
            "id": 58163796,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005",
            "updated_at": "2014-10-07T10:16:54Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/58163796",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9048962?v=3",
                "events_url": "https://api.github.com/users/edenalon/events{/privacy}",
                "followers_url": "https://api.github.com/users/edenalon/followers",
                "following_url": "https://api.github.com/users/edenalon/following{/other_user}",
                "gists_url": "https://api.github.com/users/edenalon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/edenalon",
                "id": 9048962,
                "login": "edenalon",
                "organizations_url": "https://api.github.com/users/edenalon/orgs",
                "received_events_url": "https://api.github.com/users/edenalon/received_events",
                "repos_url": "https://api.github.com/users/edenalon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/edenalon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/edenalon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/edenalon"
            }
        },
        {
            "body": "Check this tool: https://github.com/mgp25/WhatsApp-Tracker",
            "created_at": "2014-10-07T14:38:48Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1005#issuecomment-58194667",
            "id": 58194667,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005",
            "updated_at": "2014-10-07T14:38:48Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/58194667",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5390120?v=3",
                "events_url": "https://api.github.com/users/mgp25/events{/privacy}",
                "followers_url": "https://api.github.com/users/mgp25/followers",
                "following_url": "https://api.github.com/users/mgp25/following{/other_user}",
                "gists_url": "https://api.github.com/users/mgp25/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mgp25",
                "id": 5390120,
                "login": "mgp25",
                "organizations_url": "https://api.github.com/users/mgp25/orgs",
                "received_events_url": "https://api.github.com/users/mgp25/received_events",
                "repos_url": "https://api.github.com/users/mgp25/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mgp25/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mgp25/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mgp25"
            }
        },
        {
            "body": "Hi , I tried this script , but I run it on my server without ssh . and I dont know how use it .. installed here : \r\nhttp://megaupload.co.il/Whatsapp/status/watracker.php\r\ncan you help me pls ?\r\nThanks !",
            "created_at": "2014-10-07T16:46:31Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1005#issuecomment-58216369",
            "id": 58216369,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005",
            "updated_at": "2014-10-07T16:46:31Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/58216369",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9048962?v=3",
                "events_url": "https://api.github.com/users/edenalon/events{/privacy}",
                "followers_url": "https://api.github.com/users/edenalon/followers",
                "following_url": "https://api.github.com/users/edenalon/following{/other_user}",
                "gists_url": "https://api.github.com/users/edenalon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/edenalon",
                "id": 9048962,
                "login": "edenalon",
                "organizations_url": "https://api.github.com/users/edenalon/orgs",
                "received_events_url": "https://api.github.com/users/edenalon/received_events",
                "repos_url": "https://api.github.com/users/edenalon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/edenalon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/edenalon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/edenalon"
            }
        },
        {
            "body": "Also , the output is : <presence type=\"subscribe\" to=\"972526974757@s.whatsapp.net\"></presence>\r\nwithout any \"$presence\" = \"available\" .. you can check it here: \r\nhttp://megaupload.co.il/Whatsapp/src1/new.php\r\nThanks",
            "created_at": "2014-10-07T16:51:57Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1005#issuecomment-58217381",
            "id": 58217381,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005",
            "updated_at": "2014-10-07T16:51:57Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/58217381",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9048962?v=3",
                "events_url": "https://api.github.com/users/edenalon/events{/privacy}",
                "followers_url": "https://api.github.com/users/edenalon/followers",
                "following_url": "https://api.github.com/users/edenalon/following{/other_user}",
                "gists_url": "https://api.github.com/users/edenalon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/edenalon",
                "id": 9048962,
                "login": "edenalon",
                "organizations_url": "https://api.github.com/users/edenalon/orgs",
                "received_events_url": "https://api.github.com/users/edenalon/received_events",
                "repos_url": "https://api.github.com/users/edenalon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/edenalon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/edenalon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/edenalon"
            }
        },
        {
            "body": "Its usage can be found in the Readme (main page) of WhatsApp Tracker repository..",
            "created_at": "2014-10-07T16:56:11Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1005#issuecomment-58218121",
            "id": 58218121,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005",
            "updated_at": "2014-10-07T16:56:11Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/58218121",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5390120?v=3",
                "events_url": "https://api.github.com/users/mgp25/events{/privacy}",
                "followers_url": "https://api.github.com/users/mgp25/followers",
                "following_url": "https://api.github.com/users/mgp25/following{/other_user}",
                "gists_url": "https://api.github.com/users/mgp25/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mgp25",
                "id": 5390120,
                "login": "mgp25",
                "organizations_url": "https://api.github.com/users/mgp25/orgs",
                "received_events_url": "https://api.github.com/users/mgp25/received_events",
                "repos_url": "https://api.github.com/users/mgp25/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mgp25/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mgp25/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mgp25"
            }
        },
        {
            "body": "I know but I run it on browser with server . I cant use this CLI ",
            "created_at": "2014-10-07T17:00:10Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1005#issuecomment-58218881",
            "id": 58218881,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005",
            "updated_at": "2014-10-07T17:00:10Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/58218881",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9048962?v=3",
                "events_url": "https://api.github.com/users/edenalon/events{/privacy}",
                "followers_url": "https://api.github.com/users/edenalon/followers",
                "following_url": "https://api.github.com/users/edenalon/following{/other_user}",
                "gists_url": "https://api.github.com/users/edenalon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/edenalon",
                "id": 9048962,
                "login": "edenalon",
                "organizations_url": "https://api.github.com/users/edenalon/orgs",
                "received_events_url": "https://api.github.com/users/edenalon/received_events",
                "repos_url": "https://api.github.com/users/edenalon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/edenalon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/edenalon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/edenalon"
            }
        },
        {
            "body": "Then run in on your desktop..",
            "created_at": "2014-10-07T17:01:30Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1005#issuecomment-58219110",
            "id": 58219110,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005",
            "updated_at": "2014-10-07T17:01:30Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/58219110",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5390120?v=3",
                "events_url": "https://api.github.com/users/mgp25/events{/privacy}",
                "followers_url": "https://api.github.com/users/mgp25/followers",
                "following_url": "https://api.github.com/users/mgp25/following{/other_user}",
                "gists_url": "https://api.github.com/users/mgp25/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mgp25",
                "id": 5390120,
                "login": "mgp25",
                "organizations_url": "https://api.github.com/users/mgp25/orgs",
                "received_events_url": "https://api.github.com/users/mgp25/received_events",
                "repos_url": "https://api.github.com/users/mgp25/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mgp25/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mgp25/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mgp25"
            }
        },
        {
            "body": "I cant , I will use it via web and get/post .. you can help me to do it ?\r\n I can pay you for support me if you wanne - we can talk in email .",
            "created_at": "2014-10-07T17:13:05Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1005#issuecomment-58221110",
            "id": 58221110,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005",
            "updated_at": "2014-10-07T17:13:05Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/58221110",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9048962?v=3",
                "events_url": "https://api.github.com/users/edenalon/events{/privacy}",
                "followers_url": "https://api.github.com/users/edenalon/followers",
                "following_url": "https://api.github.com/users/edenalon/following{/other_user}",
                "gists_url": "https://api.github.com/users/edenalon/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/edenalon",
                "id": 9048962,
                "login": "edenalon",
                "organizations_url": "https://api.github.com/users/edenalon/orgs",
                "received_events_url": "https://api.github.com/users/edenalon/received_events",
                "repos_url": "https://api.github.com/users/edenalon/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/edenalon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/edenalon/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/edenalon"
            }
        }
    ],
    "comments": 8,
    "comments_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005/comments",
    "created_at": "2014-10-07T09:30:42Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005/events",
    "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1005",
    "id": 45086693,
    "labels": [],
    "labels_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 1005,
    "state": "open",
    "title": "Getting online status - New",
    "updated_at": "2014-10-07T17:13:05Z",
    "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1005",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9048962?v=3",
        "events_url": "https://api.github.com/users/edenalon/events{/privacy}",
        "followers_url": "https://api.github.com/users/edenalon/followers",
        "following_url": "https://api.github.com/users/edenalon/following{/other_user}",
        "gists_url": "https://api.github.com/users/edenalon/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/edenalon",
        "id": 9048962,
        "login": "edenalon",
        "organizations_url": "https://api.github.com/users/edenalon/orgs",
        "received_events_url": "https://api.github.com/users/edenalon/received_events",
        "repos_url": "https://api.github.com/users/edenalon/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/edenalon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/edenalon/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/edenalon"
    }
}