{
    "assignee": null,
    "body": "Hello,\r\n\r\nI am trying to use WhatsAPI after not using it for a year or so. Currently, I have this code:\r\n```php\r\n<?php\r\nset_time_limit(0);\r\nrequire_once '../src/whatsprot.class.php';\r\n\r\ndate_default_timezone_set('Europe/Amsterdam');\r\n\r\n$username = \"31612345678\";\r\n$password = \"redacted\";\r\n$identity = \"redacted\";\r\n$nickname = \"WhatsApp Bot\";\r\n$target = \"31687654321\";\r\n\r\n$w = new WhatsProt($username, $identity, $nickname, true);\r\n\r\nfunction getMessage($mynumber, $from, $id, $type, $time, $name, $body) {\r\n\techo \"Message from $name:\\n$body\\n\\n\";\r\n}\r\n\r\n$w->eventManager()->bind(\"onGetMessage\", \"getMessage\");\r\n\r\n$w->connect();\r\n\r\n$w->loginWithPassword($password);\r\n\r\n$w->sendSetProfilePicture('pf.jpg');\r\n$w->sendStatusUpdate('I am a robot.');\r\n\r\nwhile($w->PollMessage());\r\n```\r\n\r\nI can send messages and I do get a working profile picture and all that, but I won't receive my messages. Not by using the above code (which stops after a few seconds unless I put PollMessage in an infinite loop), or manually using GetMessages in an infinite loop. I have noticed some weird characters all over the debug code:\r\n```\r\ntx  <stream:features></stream:features>\r\n\r\ntx  <auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-2\" user=\"316\r\n12345678\">┬>zç31612345678·∟ß│°¬öèµ▓r~ß]╠äΦ♂1418667283WhatsApp/2.11.473 Android/4\r\n.3 Device/GalaxyS3 MccMnc/204001</auth>\r\n\r\nrx  <start from=\"s.whatsapp.net\"></start>\r\n\r\nrx  <stream:features></stream:features>\r\n\r\nrx  <challenge>ñª▐╟╨╟☺i╒Nû╧e½jcÿüτ≤</challenge>\r\n\r\ntx  <response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">εYc╔)≥Æ←τXs▐τσ↔╬v─ï\\K·¢√♣\r\nH\r\nQ▌§^UR⌠☻</response>\r\n\r\nrx  <success t=\"1418667283\" props=\"4\" kind=\"free\" status=\"active\" creation=\"1332\r\n962876\" expiration=\"1429186737\">+█jê0á:╤{╙╫╘,v2Æ╣♣╒4</success>\r\n\r\ntx  <presence name=\"WhatsApp Bot\"></presence>\r\n\r\ntx  <iq id=\"setphoto-1418667283-1\" to=\"31612345678@s.whatsapp.net\" type=\"set\" xm\r\nlns=\"w:profile:picture\">\r\ntx    <picture> 6419 byte data</picture>\r\ntx    <picture type=\"preview\"> 2221 byte data</picture>\r\ntx  </iq>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-23\" offline=\"0\" ty\r\npe=\"text\" t=\"1418665560\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\n!♣Ç3¿b8╒X°òY)ⁿTI*(↑«∞qS╣└2↨╢δ←¥-G►←↑ \"►╥╬Ç╗á$1▄▬Ñ ├╫♣D▐EαxT∩¥┬/</enc>\r\nrx  </message>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-24\" offline=\"0\" ty\r\npe=\"text\" t=\"1418665742\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\n!♣Ç3¿b8╒X°òY)ⁿTI*(↑«∞qS╣└2↨╢δ←¥-G►∟↑ \"►φ2NµΘl╠Ç╪U0 µ↨ªú 0╟→¶¬┐;</enc>\r\nrx  </message>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-25\" offline=\"0\" ty\r\npe=\"text\" t=\"1418665756\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\n!♣Ç3¿b8╒X°òY)ⁿTI*(↑«∞qS╣└2↨╢δ←¥-G►↔↑ \"►'K╧9┌o{u[?¿ï╪RZÖH,ΘÅ§┴£</enc>\r\nrx  </message>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-26\" offline=\"0\" ty\r\npe=\"text\" t=\"1418665758\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\n!♣Ç3¿b8╒X°òY)ⁿTI*(↑«∞qS╣└2↨╢δ←¥-G►▲↑ \"►¡σ███ñs,┼♂âàvÑ╡↑ìb¢▒è╪&é</enc>\r\nrx  </message>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-27\" offline=\"0\" ty\r\npe=\"text\" t=\"1418665759\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\n!♣Ç3¿b8╒X°òY)ⁿTI*(↑«∞qS╣└2↨╢δ←¥-G►▼↑ \"►≤↓Å∞╨¡╧├►╠⌐┤Ü_Gªi╞é╞{Gz</enc>\r\nrx  </message>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-28\" offline=\"0\" ty\r\npe=\"text\" t=\"1418665898\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\n!♣Ç3¿b8╒X°òY)ⁿTI*(↑«∞qS╣└2↨╢δ←¥-G► ↑ \"►4²♂ⁿ╘.   º←ù☼AºUtiòQ9s↕ÿP■</enc>\r\nrx  </message>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-29\" offline=\"0\" ty\r\npe=\"text\" t=\"1418665951\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\n!♣Ç3¿b8╒X°òY)ⁿTI*(↑«∞qS╣└2↨╢δ←¥-G►!↑ \"►▀)ò▒♦║årp▼∟2d τ∙ûÿå_Ω|mⁿ</enc>\r\nrx  </message>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-30\" offline=\"0\" ty\r\npe=\"text\" t=\"1418665961\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\n!♣Ç3¿b8╒X°òY)ⁿTI*(↑«∞qS╣└2↨╢δ←¥-G►\"↑ \"►▲eΦ≥┐\"╧t←i→ │ì0£<^╢┴∞L1┼</enc>\r\nrx  </message>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-36\" offline=\"0\" ty\r\npe=\"text\" t=\"1418666793\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\n!♣Ç3¿b8╒X°òY)ⁿTI*(↑«∞qS╣└2↨╢δ←¥-G►#↑ \"►QÅ=╢╤C¢τC╒ⁿ, :Ä╙öµ8T↕µùª</enc>\r\nrx  </message>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-37\" offline=\"0\" ty\r\npe=\"text\" t=\"1418666820\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\n!♣Ç3¿b8╒X°òY)ⁿTI*(↑«∞qS╣└2↨╢δ←¥-G►$↑ \"►æ¶▐ßσM S)↔u↕╟^╫3╝╖|z▐WÑµ</enc>\r\nrx  </message>\r\n\r\nrx  <message from=\"31687654321@s.whatsapp.net\" id=\"1418661434-38\" offline=\"0\" ty\r\npe=\"text\" t=\"1418666820\" notify=\"L.\">\r\nrx    <enc v=\"1\" type=\"msg\" av=\"Android/2.11.432\">3\r\nÑ╪Y     °↑4ä</enc>↑«∞qS╣└2↨╢δ←¥-G►%↑ \"►§ïn#⌠É¿à◄d%9k≥╛\r\nrx  </message>\r\n\r\nrx  <ib from=\"s.whatsapp.net\">\r\nrx    <offline count=\"11\"></offline>\r\nrx  </ib>\r\n\r\nrx  <presence from=\"31612345678@s.whatsapp.net\"></presence>\r\n\r\nrx  <presence from=\"31687654321@s.whatsapp.net\" type=\"unavailable\" last=\"1418667\r\n244\"></presence>\r\n\r\nrx  <iq from=\"31612345678@s.whatsapp.net\" id=\"setphoto-1418667283-1\" type=\"resul\r\nt\">\r\nrx    <picture id=\"1418667283\"></picture>\r\nrx  </iq>\r\n\r\ntx  <iq to=\"s.whatsapp.net\" type=\"set\" id=\"sendstatus-1418667283-2\" xmlns=\"statu\r\ns\">\r\ntx    <status>I am a robot.</status>\r\ntx  </iq>\r\n\r\nrx  <iq from=\"s.whatsapp.net\" id=\"sendstatus-1418667283-2\" type=\"result\"></iq>\r\n```\r\n\r\nI am running from the command line.",
    "closed_at": null,
    "comment_data": [
        {
            "body": "@Sydcul Use WhatsAPI Official repo instead: https://github.com/mgp25/WhatsAPI-Official\r\n\r\nWiki available",
            "created_at": "2014-12-15T18:30:29Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1052#issuecomment-67041018",
            "id": 67041018,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1052",
            "updated_at": "2014-12-15T18:30:29Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/67041018",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5390120?v=3",
                "events_url": "https://api.github.com/users/mgp25/events{/privacy}",
                "followers_url": "https://api.github.com/users/mgp25/followers",
                "following_url": "https://api.github.com/users/mgp25/following{/other_user}",
                "gists_url": "https://api.github.com/users/mgp25/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mgp25",
                "id": 5390120,
                "login": "mgp25",
                "organizations_url": "https://api.github.com/users/mgp25/orgs",
                "received_events_url": "https://api.github.com/users/mgp25/received_events",
                "repos_url": "https://api.github.com/users/mgp25/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mgp25/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mgp25/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mgp25"
            }
        },
        {
            "body": "@mgp25 Is this one dead?",
            "created_at": "2014-12-15T18:38:23Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1052#issuecomment-67042225",
            "id": 67042225,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1052",
            "updated_at": "2014-12-15T18:38:23Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/67042225",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1252824?v=3",
                "events_url": "https://api.github.com/users/Sydcul/events{/privacy}",
                "followers_url": "https://api.github.com/users/Sydcul/followers",
                "following_url": "https://api.github.com/users/Sydcul/following{/other_user}",
                "gists_url": "https://api.github.com/users/Sydcul/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Sydcul",
                "id": 1252824,
                "login": "Sydcul",
                "organizations_url": "https://api.github.com/users/Sydcul/orgs",
                "received_events_url": "https://api.github.com/users/Sydcul/received_events",
                "repos_url": "https://api.github.com/users/Sydcul/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Sydcul/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Sydcul/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Sydcul"
            }
        },
        {
            "body": "@Sydcul yes",
            "created_at": "2014-12-15T18:39:04Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1052#issuecomment-67042330",
            "id": 67042330,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1052",
            "updated_at": "2014-12-15T18:39:04Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/67042330",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5390120?v=3",
                "events_url": "https://api.github.com/users/mgp25/events{/privacy}",
                "followers_url": "https://api.github.com/users/mgp25/followers",
                "following_url": "https://api.github.com/users/mgp25/following{/other_user}",
                "gists_url": "https://api.github.com/users/mgp25/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mgp25",
                "id": 5390120,
                "login": "mgp25",
                "organizations_url": "https://api.github.com/users/mgp25/orgs",
                "received_events_url": "https://api.github.com/users/mgp25/received_events",
                "repos_url": "https://api.github.com/users/mgp25/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mgp25/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mgp25/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mgp25"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1052/comments",
    "created_at": "2014-12-15T18:17:47Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1252824?v=3",
                "events_url": "https://api.github.com/users/Sydcul/events{/privacy}",
                "followers_url": "https://api.github.com/users/Sydcul/followers",
                "following_url": "https://api.github.com/users/Sydcul/following{/other_user}",
                "gists_url": "https://api.github.com/users/Sydcul/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Sydcul",
                "id": 1252824,
                "login": "Sydcul",
                "organizations_url": "https://api.github.com/users/Sydcul/orgs",
                "received_events_url": "https://api.github.com/users/Sydcul/received_events",
                "repos_url": "https://api.github.com/users/Sydcul/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Sydcul/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Sydcul/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Sydcul"
            },
            "commit_id": null,
            "created_at": "2014-12-15T18:30:29Z",
            "event": "mentioned",
            "id": 207796068,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/207796068"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1252824?v=3",
                "events_url": "https://api.github.com/users/Sydcul/events{/privacy}",
                "followers_url": "https://api.github.com/users/Sydcul/followers",
                "following_url": "https://api.github.com/users/Sydcul/following{/other_user}",
                "gists_url": "https://api.github.com/users/Sydcul/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Sydcul",
                "id": 1252824,
                "login": "Sydcul",
                "organizations_url": "https://api.github.com/users/Sydcul/orgs",
                "received_events_url": "https://api.github.com/users/Sydcul/received_events",
                "repos_url": "https://api.github.com/users/Sydcul/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Sydcul/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Sydcul/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Sydcul"
            },
            "commit_id": null,
            "created_at": "2014-12-15T18:30:29Z",
            "event": "subscribed",
            "id": 207796069,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/207796069"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5390120?v=3",
                "events_url": "https://api.github.com/users/mgp25/events{/privacy}",
                "followers_url": "https://api.github.com/users/mgp25/followers",
                "following_url": "https://api.github.com/users/mgp25/following{/other_user}",
                "gists_url": "https://api.github.com/users/mgp25/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mgp25",
                "id": 5390120,
                "login": "mgp25",
                "organizations_url": "https://api.github.com/users/mgp25/orgs",
                "received_events_url": "https://api.github.com/users/mgp25/received_events",
                "repos_url": "https://api.github.com/users/mgp25/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mgp25/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mgp25/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mgp25"
            },
            "commit_id": null,
            "created_at": "2014-12-15T18:38:23Z",
            "event": "mentioned",
            "id": 207801032,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/207801032"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5390120?v=3",
                "events_url": "https://api.github.com/users/mgp25/events{/privacy}",
                "followers_url": "https://api.github.com/users/mgp25/followers",
                "following_url": "https://api.github.com/users/mgp25/following{/other_user}",
                "gists_url": "https://api.github.com/users/mgp25/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mgp25",
                "id": 5390120,
                "login": "mgp25",
                "organizations_url": "https://api.github.com/users/mgp25/orgs",
                "received_events_url": "https://api.github.com/users/mgp25/received_events",
                "repos_url": "https://api.github.com/users/mgp25/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mgp25/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mgp25/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mgp25"
            },
            "commit_id": null,
            "created_at": "2014-12-15T18:38:23Z",
            "event": "subscribed",
            "id": 207801033,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/207801033"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1252824?v=3",
                "events_url": "https://api.github.com/users/Sydcul/events{/privacy}",
                "followers_url": "https://api.github.com/users/Sydcul/followers",
                "following_url": "https://api.github.com/users/Sydcul/following{/other_user}",
                "gists_url": "https://api.github.com/users/Sydcul/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Sydcul",
                "id": 1252824,
                "login": "Sydcul",
                "organizations_url": "https://api.github.com/users/Sydcul/orgs",
                "received_events_url": "https://api.github.com/users/Sydcul/received_events",
                "repos_url": "https://api.github.com/users/Sydcul/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Sydcul/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Sydcul/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Sydcul"
            },
            "commit_id": null,
            "created_at": "2014-12-15T18:39:04Z",
            "event": "mentioned",
            "id": 207801466,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/207801466"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1252824?v=3",
                "events_url": "https://api.github.com/users/Sydcul/events{/privacy}",
                "followers_url": "https://api.github.com/users/Sydcul/followers",
                "following_url": "https://api.github.com/users/Sydcul/following{/other_user}",
                "gists_url": "https://api.github.com/users/Sydcul/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Sydcul",
                "id": 1252824,
                "login": "Sydcul",
                "organizations_url": "https://api.github.com/users/Sydcul/orgs",
                "received_events_url": "https://api.github.com/users/Sydcul/received_events",
                "repos_url": "https://api.github.com/users/Sydcul/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Sydcul/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Sydcul/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Sydcul"
            },
            "commit_id": null,
            "created_at": "2014-12-15T18:39:04Z",
            "event": "subscribed",
            "id": 207801467,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/207801467"
        }
    ],
    "events_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1052/events",
    "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1052",
    "id": 52020071,
    "labels": [],
    "labels_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1052/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 1052,
    "state": "open",
    "title": "Can't receive messages",
    "updated_at": "2014-12-15T18:39:04Z",
    "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1052",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1252824?v=3",
        "events_url": "https://api.github.com/users/Sydcul/events{/privacy}",
        "followers_url": "https://api.github.com/users/Sydcul/followers",
        "following_url": "https://api.github.com/users/Sydcul/following{/other_user}",
        "gists_url": "https://api.github.com/users/Sydcul/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Sydcul",
        "id": 1252824,
        "login": "Sydcul",
        "organizations_url": "https://api.github.com/users/Sydcul/orgs",
        "received_events_url": "https://api.github.com/users/Sydcul/received_events",
        "repos_url": "https://api.github.com/users/Sydcul/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Sydcul/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Sydcul/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Sydcul"
    }
}