{
    "assignee": null,
    "body": "After sending a large image, exception \"Socket closed\" throws.\r\nHere in the examples is recommended to periodically cause \r\n$w->sendPresence();\r\n$w->pollMessage();\r\nthe connection is not broken. But how to do it while sending image? \r\nThe image is large (4.5 MB), and sending takes 2-3 minutes.\r\nWhat the timeout is on the whatsapp server? Or the reason in other? In what cases, an exception \"Socket closed\" occurs?\r\nIn what direction to look?\r\n\r\nHere is the script. The result of the script - nothing comes to the smartphone.\r\nThe script ends with exception \"Socket closed\".\r\n\r\n\r\n```\r\n\r\nrequire_once('/../WhatsAPI/src/whatsprot.class.php');\r\n\r\nset_time_limit(0);\r\nini_set('max_execution_time',0);\r\nini_set(\"default_socket_timeout\",\"300\");\r\n\r\n$w = new WhatsProt('<fromnumber>', '012345678901234', 'Nick1', true);\r\n\r\n$w->connect();\r\n$w->loginWithPassword('<frompass>');\r\n$w->sendMessageImage('<tonumber>', \"C:\\\\bigimage.jpg\");\r\n$w->sendMessage('<tonumber>', \"Message1\");\r\n\r\nfor ($i=1; $i<=10; $i++){\r\n    $w->sendPresence();\r\n    $w->pollMessage();\r\n    sleep(10);\r\n}\r\n```\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "body": "It's because in 300 seconds, or 3 minutes, I don't know, the server close connection. It's better if you convert your image first, don't you think? Use php-gd.",
            "created_at": "2014-10-28T05:25:34Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1018#issuecomment-60711375",
            "id": 60711375,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1018",
            "updated_at": "2014-10-28T05:25:34Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/60711375",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5036316?v=3",
                "events_url": "https://api.github.com/users/eliasjnior/events{/privacy}",
                "followers_url": "https://api.github.com/users/eliasjnior/followers",
                "following_url": "https://api.github.com/users/eliasjnior/following{/other_user}",
                "gists_url": "https://api.github.com/users/eliasjnior/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/eliasjnior",
                "id": 5036316,
                "login": "eliasjnior",
                "organizations_url": "https://api.github.com/users/eliasjnior/orgs",
                "received_events_url": "https://api.github.com/users/eliasjnior/received_events",
                "repos_url": "https://api.github.com/users/eliasjnior/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/eliasjnior/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/eliasjnior/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/eliasjnior"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1018/comments",
    "created_at": "2014-10-22T08:26:36Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1018/events",
    "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1018",
    "id": 46484233,
    "labels": [],
    "labels_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1018/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 1018,
    "state": "open",
    "title": "sendMessageImage and \"Socket closed\" Exception",
    "updated_at": "2014-10-28T05:25:34Z",
    "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1018",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9348539?v=3",
        "events_url": "https://api.github.com/users/DSC0088/events{/privacy}",
        "followers_url": "https://api.github.com/users/DSC0088/followers",
        "following_url": "https://api.github.com/users/DSC0088/following{/other_user}",
        "gists_url": "https://api.github.com/users/DSC0088/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/DSC0088",
        "id": 9348539,
        "login": "DSC0088",
        "organizations_url": "https://api.github.com/users/DSC0088/orgs",
        "received_events_url": "https://api.github.com/users/DSC0088/received_events",
        "repos_url": "https://api.github.com/users/DSC0088/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/DSC0088/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/DSC0088/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/DSC0088"
    }
}