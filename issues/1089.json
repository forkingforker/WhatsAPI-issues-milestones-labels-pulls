{
    "assignee": null,
    "body": "<?php\r\n/**\r\n *                  CONFIG SETTINGS\r\n * This script needs you to have a WHATSAPP password BEFORE you use it. If you\r\n * do NOT have your WHATSAPP password THIS SCRIPT IS OF NO USE.\r\n *\r\n * DO NOT LOOK FOR HELP WITH THIS SCRIPT IF YOU DO NOT HAVE YOUR WHATSAPP PASSWORD!!!\r\n *\r\n * Use the example below to add your own config settings.\r\n *\r\n * (Did I mention that you NEED to ALREADY KNOW your whatsapp's password?)\r\n *\r\n * Gmail Users:\r\n * If you have a GOOGLE email account AND you have *added mobile phone numbers* to your\r\n * gmail contacts this script can access those contacts and add them to the dropdown list\r\n * for you to select easily when you want to text someone.\r\n *\r\n * Numbers should be marked as MOBILE and should be in INTERNATIONAL format.\r\n *\r\n * Just to ABSOLUTELY CLEAR - by having gmail contacts listed in this script, does not imply that\r\n * that person has whatsapp installed. You need to know if they can accept whatsapp messages before\r\n * you try sending them messages.\r\n *\r\n * Most of my friends have whatsapp so I know I can select almost anyone from my google contacts.\r\n *\r\n * If you don't wish to have this feature, then do not add the email and email password line to your\r\n * config.\r\n *\r\n *\r\n * You can add as many config blocks as you want to. As long as each new user has a whatsapp password already....\r\n *\r\n * Enjoy.\r\n *\r\n */\r\n//This is a aimple password to view this script. It is NOT the whatsapp password.\r\n$config['webpassword'] = 'MakeUpPassword';\r\n//Config Template\r\n//$config['YourFirstName'] = array(\r\n//    'id' => '<The Device Identity token. Obtained during registration with this API or using MissVenom (https://github.com/shirioko/MissVenom)to sniff from your phone.>',\r\n//    'fromNumber' => '<Your Mobile Number eg: 44123456789>',\r\n//    'nick' => '<A Nickname for your phone>',\r\n//    'waPassword' => \"<Your WhatsAPP password. Obtained during registration with this API or using Missvenom to sniff from your phone.>\"\r\n//\r\n//OPTIONAL\r\n//    'email' => 'testemail@gmail.com',\r\n//    'emailPassword' => 'gmailpassword'\r\n//\r\n//);\r\n//\r\n//\r\n//Example\r\n//$config['Jonathan'] = array(\r\n//    'id' => 'e807f1fcf82d132f9bb018ca6738a19f',\r\n//    'fromNumber' => '441234567890',\r\n//    'nick' => \"Jonathan's iPhone\",\r\n//    'waPassword' => \"EsdfsawS+/ffdskjsdhwebdgxbs=\",\r\n//    'email' => 'testemail@gmail.com',\r\n//    'emailPassword' => 'gmailpassword'\r\n//);\r\n$config['sunl'] = array(\r\n    'id' => 'e807f1fcf82d132f9bb018ca6738a19f',\r\n    'fromNumber' => '912222222222',\r\n    'nick' => \"sun\",\r\n    'waPassword' => \"MhdLUXcwBrEJEFVsEIhKVKZ+Mik=\",\r\n    'email' => 'sun@gmail.com',\r\n    'emailPassword' => 'sun123'\r\n);\r\n/**\r\n *\r\n * NOTHING ELSE TO EDIT BELOW THIS LINE.\r\n *\r\n */\r\nrequire '../src/whatsprot.class.php';\r\n/**\r\n * For the future, other ways of getting contacts from various sources\r\n * can be used by implementing the Contacts Interface.\r\n *\r\n *\r\n * Data must be returned in an array that looks like follows:\r\n *\r\n * Array\r\n *\r\n * (\r\n *   [0] => Array\r\n *       (\r\n *           [name] => PersonName\r\n *           [id] => 1234567890\r\n *       )\r\n *\r\n *   [1] => Array\r\n *       (\r\n *           [name] => PersonName2\r\n *           [id] => 0987654321\r\n *       )\r\n * )\r\n */\r\ninterface Contacts\r\n{\r\n    public function getContacts(array $config, $user);\r\n}\r\n/**\r\n * Google Contacts implementation.\r\n */\r\nclass GoogleContacts implements Contacts\r\n{\r\n    private $config;\r\n    private $curl;\r\n    private $auth;\r\n    private $headers;\r\n    public function __construct()\r\n    {\r\n        $this->curl = curl_init();\r\n    }\r\n    public function getContacts(array $config, $user)\r\n    {\r\n        if (!array_key_exists($user, $config)) {\r\n            throw new Exception(\"No Credentials for the user requested are available.\");\r\n        } else {\r\n            $this->config = $config;\r\n            $contacts = $this->getGoogleContacts($user);\r\n        }\r\n        if (is_array($contacts)) {\r\n            return $contacts;\r\n        }\r\n        return false;\r\n    }\r\n    private function getGoogleContacts($user)\r\n    {\r\n        if (!isset($this->config[$user]['email'])) {\r\n            throw new Exception(\"Email address for $user was not supplied or set.\");\r\n        }\r\n        try {\r\n            $auth = $this->getAuthString($user);\r\n            $this->setHeaders($auth);\r\n            $groupid = $this->getGoogleGroupId('System Group: My Contacts');\r\n            $contacts = $this->retreiveContacts($groupid);\r\n        } catch (Exception $e) {\r\n            throw $e;\r\n        }\r\n        return $contacts;\r\n    }\r\n    private function getAuthString($user)\r\n    {\r\n        // Construct an HTTP POST request\r\n        $clientlogin_url = \"https://www.google.com/accounts/ClientLogin\";\r\n        $clientlogin_post = array(\r\n            \"accountType\" => \"HOSTED_OR_GOOGLE\",\r\n            \"Email\" => $this->config[$user]['email'],\r\n            \"Passwd\" => $this->config[$user]['emailPassword'],\r\n            \"service\" => \"cp\",\r\n            \"source\" => \"whatsapp\"\r\n        );\r\n        // Set some options (some for SHTTP)\r\n        curl_setopt($this->curl, CURLOPT_URL, $clientlogin_url);\r\n        curl_setopt($this->curl, CURLOPT_POST, true);\r\n        curl_setopt($this->curl, CURLOPT_POSTFIELDS, $clientlogin_post);\r\n        curl_setopt($this->curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY);\r\n        curl_setopt($this->curl, CURLOPT_SSL_VERIFYPEER, false);\r\n        curl_setopt($this->curl, CURLOPT_RETURNTRANSFER, 1);\r\n        // Execute\r\n        $authresponse = curl_exec($this->curl);\r\n        // Get the Auth string and save it\r\n        $matches = null;\r\n        $res = preg_match(\"/Auth=([a-z0-9_-]+)/i\", $authresponse, $matches);\r\n        if ($res == 1) {\r\n            $this->auth = $matches[1];\r\n            return $matches[1];\r\n        }\r\n        throw new Exception('Could not get Authentication code from google');\r\n    }\r\n    private function setHeaders($auth)\r\n    {\r\n        $this->headers = array(\r\n            \"Authorization: GoogleLogin auth=\" . $auth,\r\n            \"GData-Version: 2.0\",\r\n        );\r\n    }\r\n    private function getHeaders()\r\n    {\r\n        return $this->headers;\r\n    }\r\n    private function getGoogleGroupId($groupname)\r\n    {\r\n        // Connect to Google and get a list of all contact groups.\r\n        curl_setopt($this->curl, CURLOPT_URL, \"https://www.google.com/m8/feeds/groups/default/full\");\r\n        curl_setopt($this->curl, CURLOPT_HTTPHEADER, $this->getHeaders());\r\n        curl_setopt($this->curl, CURLOPT_POST, false);\r\n        curl_setopt($this->curl, CURLOPT_RETURNTRANSFER, true);\r\n        $groupresponse = curl_exec($this->curl);\r\n        //Load XML response\r\n        $atom = simplexml_load_string($groupresponse);\r\n        //Find the group id for the main contact group.\r\n        foreach ($atom->entry as $entry) {\r\n            if (stristr($entry->title, $groupname) !== false) {\r\n                $contactgroup = $entry->id;\r\n            }\r\n        }\r\n        if (isset($contactgroup)) {\r\n            return $contactgroup;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    private function retreiveContacts($groupid)\r\n    {\r\n        curl_setopt($this->curl, CURLOPT_URL, \"https://www.google.com/m8/feeds/contacts/default/full?max-results=2000&group=$groupid\");\r\n        curl_setopt($this->curl, CURLOPT_HTTPHEADER, $this->getHeaders());\r\n        curl_setopt($this->curl, CURLOPT_POST, false);\r\n        curl_setopt($this->curl, CURLOPT_RETURNTRANSFER, true);\r\n        $contactsresponse = curl_exec($this->curl);\r\n        curl_close($this->curl);\r\n        //Load XML response\r\n        $contactsxml = simplexml_load_string($contactsresponse);\r\n        $data = array();\r\n        foreach ($contactsxml->entry as $entry) {\r\n            $name = $entry->title;\r\n            $gd = $entry->children('http://schemas.google.com/g/2005');\r\n            foreach ($gd->phoneNumber as $p) {\r\n                if ($p->attributes()->rel == \"http://schemas.google.com/g/2005#mobile\") {\r\n                    $n = trim(preg_replace(\"/[\\D+]*/\", \"\", $p));\r\n                    if (substr((string) $n, 0, 1) !== '0' && strlen($n) > 10) {\r\n                        $data[] = array('name' => \"$name ($n)\", 'id' => $n);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        usort($data, array($this, 'sortByName'));\r\n        return($data);\r\n    }\r\n    public function sortByName($a, $b)\r\n    {\r\n        return strcasecmp($a['name'], $b['name']);\r\n    }\r\n}\r\n/**\r\n * Start session so we don't always have to\r\n * log in.\r\n */\r\nif (!isset($_SESSION)) {\r\n    $cookieParams = session_get_cookie_params(); // Gets current cookies params.\r\n    session_set_cookie_params($cookieParams[\"lifetime\"], $cookieParams[\"path\"], $cookieParams[\"domain\"], false, true);\r\n    session_name('wa_session'); // Sets the session name to the one set above.\r\n    session_start(); // Start the php session\r\n}\r\n/**\r\n * Detect how the script was called. If it was POSTED too, we have\r\n * something to do, if it was just called via GET, we probably\r\n * only have to show the login page.\r\n */\r\n$whatsapp = new Whatsapp($config);\r\nif ($_SERVER['REQUEST_METHOD'] !== \"POST\") {\r\n    if (isset($_SESSION['logged_in']) && $_SESSION['logged_in'] !== true) {\r\n        exit($whatsapp->showWebLoginForm());\r\n    }\r\n}\r\n$whatsapp->process();\r\nclass Whatsapp\r\n{\r\n    private $config;\r\n    private $from;\r\n    private $number;\r\n    private $id;\r\n    private $nick;\r\n    private $password;\r\n    private $contacts = array();\r\n    private $inputs;\r\n    private $messages;\r\n    private $wa;\r\n    private $connected;\r\n    private $waGroupList;\r\n    public function __construct(array $config)\r\n    {\r\n        $this->config = $config;\r\n        if ($_SERVER['REQUEST_METHOD'] == \"POST\") {\r\n            try {\r\n                $this->inputs = $this->cleanPostInputs();\r\n                if (isset($this->inputs['from'])) {\r\n                    $this->from = $this->inputs['from'];\r\n                    if (!array_key_exists($this->from, $this->config)) {\r\n                        exit(json_encode(array(\r\n                            \"success\" => false,\r\n                            'type' => 'contacts',\r\n                            \"errormsg\" => \"No config settings for user $this->from could be found\"\r\n                        )));\r\n                    } else {\r\n                        $this->number = $this->config[$this->from]['fromNumber'];\r\n                        $this->id = $this->config[$this->from]['id'];\r\n                        $this->nick = $this->config[$this->from]['nick'];\r\n                        $this->password = $this->config[$this->from]['waPassword'];\r\n                        $this->wa = new WhatsProt($this->number, $this->id, $this->nick, false);\r\n                        $this->wa->eventManager()->bind('onGetMessage', array($this, 'processReceivedMessage'));\r\n                        $this->wa->eventManager()->bind('onConnect', array($this, 'connected'));\r\n                        $this->wa->eventManager()->bind('onGetGroups', array($this, 'processGroupArray'));\r\n                    }\r\n                }\r\n            } catch (Exception $e) {\r\n                exit(json_encode(array(\r\n                    \"success\" => false,\r\n                    'type' => 'contacts',\r\n                    \"errormsg\" => $e->getMessage()\r\n                )));\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Sets flag when there is a connection with WhatsAPP servers.\r\n     *\r\n     * @return void\r\n     */\r\n    public function connected()\r\n    {\r\n        $this->connected = true;\r\n    }\r\n    /**\r\n     * Clean and Filter the inputted Form values\r\n     *\r\n     * This function attempts to clean and filter input values from\r\n     * the form in the $_POST array. As nothing is currently put into\r\n     * a database etc, this is probably not required, but it should help\r\n     * if someone wishes to extend this project later.\r\n     *\r\n     * @return array     array with values that have been filtered.\r\n     * @throws Exception If no $_POST values submitted.\r\n     */\r\n    private function cleanPostInputs()\r\n    {\r\n        $args = array(\r\n            'action' => FILTER_SANITIZE_STRING,\r\n            'password' => FILTER_SANITIZE_STRING,\r\n            'from' => FILTER_SANITIZE_STRING,\r\n            'to' => array(\r\n                'filter' => FILTER_SANITIZE_NUMBER_INT,\r\n                'flags' => FILTER_REQUIRE_ARRAY,\r\n            ),\r\n            'message' => FILTER_UNSAFE_RAW,\r\n            'image' => FILTER_VALIDATE_URL,\r\n            'audio' => FILTER_VALIDATE_URL,\r\n            'video' => FILTER_VALIDATE_URL,\r\n            'locationname' => FILTER_SANITIZE_STRING,\r\n            'status' => FILTER_SANITIZE_STRING,\r\n            'userlat' => FILTER_SANITIZE_STRING,\r\n            'userlong' => FILTER_SANITIZE_STRING\r\n        );\r\n        $myinputs = filter_input_array(INPUT_POST, $args);\r\n        if (!$myinputs) {\r\n            throw Exception(\"Problem Filtering the inputs\");\r\n        }\r\n        return $myinputs;\r\n    }\r\n    /**\r\n     * Process the latest request.\r\n     *\r\n     * Decide what course of action to take with the latest\r\n     * request/post to this script.\r\n     *\r\n     * @return void\r\n     */\r\n    public function process()\r\n    {\r\n        switch ($this->inputs['action']) {\r\n            case 'login':\r\n                $this->webLogin();\r\n                break;\r\n            case 'logout':\r\n                $this->webLogout();\r\n                exit($this->showWebLoginForm());\r\n                break;\r\n            case 'getContacts':\r\n                $this->getContacts();\r\n                break;\r\n            case 'updateStatus':\r\n                $this->updateStatus();\r\n                break;\r\n            case 'sendMessage':\r\n                $this->sendMessage();\r\n                break;\r\n            case 'sendBroadcast':\r\n                $this->sendBroadcast();\r\n                break;\r\n            default:\r\n                if (isset($_SESSION['logged_in']) && $_SESSION['logged_in'] == true) {\r\n                    exit($this->showWebForm());\r\n                }\r\n                exit($this->showWebLoginForm());\r\n                break;\r\n        }\r\n    }\r\n    /**\r\n     * Get Contacts from various sources to display in form.\r\n     *\r\n     * This method will allow you to add contacts from external\r\n     * sources to add to the \"to box\" dropdown list on the form.\r\n     * Currently this can include:\r\n     *  - Whatsapp Groups for the current user\r\n     *  - Google Contacts (if username/password was supplied in config)\r\n     *\r\n     * @return void\r\n     *\r\n     */\r\n    private function getContacts()\r\n    {\r\n        try {\r\n            //Get whatsapp's Groups this user belongs to.\r\n            $this->waGroupList = array();\r\n            $this->getGroupList();\r\n            if (is_array($this->waGroupList)) {\r\n                $this->contacts = array_merge($this->contacts, $this->waGroupList);\r\n            }\r\n            //Get contacts from google if gmail account configured.\r\n            $googleContacts = array();\r\n            if (isset($this->config[$this->from]['email'])) {\r\n                $email = $this->config[$this->from]['email'];\r\n                if (stripos($email, 'gmail') !== false || stripos($email, 'googlemail') !== false) {\r\n                    $google = new GoogleContacts();\r\n                    $googleContacts = $google->getContacts($this->config, $this->from);\r\n                    if (is_array($googleContacts)) {\r\n                        $this->contacts = array_merge($this->contacts, $googleContacts);\r\n                    }\r\n                }\r\n            }\r\n            if (isset($this->contacts)) {\r\n                exit(json_encode(array(\r\n                    \"success\" => true,\r\n                    \"type\" => 'contacts',\r\n                    \"data\" => $this->contacts,\r\n                    \"messages\" => $this->messages\r\n                )));\r\n            }\r\n        } catch (Exception $e) {\r\n            exit(json_encode(array(\r\n                \"success\" => false,\r\n                'type' => 'contacts',\r\n                \"errormsg\" => $e->getMessage()\r\n            )));\r\n        }\r\n    }\r\n    /**\r\n     * Cleanly disconnect from Whatsapp.\r\n     *\r\n     * Ensure at end of script, if a connected had been made\r\n     * to the whatsapp servers, that it is nicely terminated.\r\n     *\r\n     * @return void\r\n     */\r\n    public function __destruct()\r\n    {\r\n        if (isset($this->wa) && $this->connected) {\r\n            $this->wa->disconnect();\r\n        }\r\n    }\r\n    /**\r\n     * Connect to Whatsapp.\r\n     *\r\n     * Create a connection to the whatsapp servers\r\n     * using the supplied password.\r\n     *\r\n     * @return boolean\r\n     */\r\n    private function connectToWhatsApp()\r\n    {\r\n        if (isset($this->wa)) {\r\n            $this->wa->connect();\r\n            $this->wa->loginWithPassword($this->password);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Return all groups a user belongs too.\r\n     *\r\n     * Log into the whatsapp servers and return a list\r\n     * of all the groups a user participates in.\r\n     *\r\n     * @return void\r\n     */\r\n    private function getGroupList()\r\n    {\r\n        $this->connectToWhatsApp();\r\n        $this->wa->sendGetGroups();\r\n    }\r\n    /**\r\n     * Process inbound text messages.\r\n     *\r\n     * If an inbound message is detected, this method will\r\n     * store the details so that it can be shown to the user\r\n     * at a suitable time.\r\n     *\r\n     * @param string $phone The number that is receiving the message\r\n     * @param string $from  The number that is sending the message\r\n     * @param string $id    The unique ID for the message\r\n     * @param string $type  Type of inbound message\r\n     * @param string $time  Y-m-d H:m:s formatted string\r\n     * @param string $name  The Name of sender (nick)\r\n     * @param string $data  The actual message\r\n     *\r\n     * @return void\r\n     */\r\n    public function processReceivedMessage($phone, $from, $id, $type, $time, $name, $data)\r\n    {\r\n        $matches = null;\r\n        $time = date('Y-m-d H:i:s', $time);\r\n        if (preg_match('/\\d*/', $from, $matches)) {\r\n            $from = $matches[0];\r\n        }\r\n        $this->messages[] = array('phone' => $phone, 'from' => $from, 'id' => $id, 'type' => $type, 'time' => $time, 'name' => $name, 'data' => $data);\r\n    }\r\n    /**\r\n     * Process the event onGetGroupList and sets a formatted array of groups the user belongs to.\r\n     *\r\n     * @param  string        $phone      The phone number (jid ) of the user\r\n     * @param  array         $groupArray Array with details of all groups user eitehr belongs to or owns.\r\n     * @return array|boolean\r\n     */\r\n    public function processGroupArray($phone, $groupArray)\r\n    {\r\n        $formattedGroups = array();\r\n        if (!empty($groupArray)) {\r\n            foreach ($groupArray as $group) {\r\n                $formattedGroups[] = array('name' => \"GROUP: \" . $group['subject'], 'id' => $group['id']);\r\n            }\r\n            $this->waGroupList = $formattedGroups;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Update a users Status\r\n     *\r\n     * @return void\r\n     */\r\n    private function updateStatus()\r\n    {\r\n        if (isset($this->inputs['status']) && trim($this->inputs['status']) !== '') {\r\n            $this->connectToWhatsApp();\r\n            $this->wa->sendStatusUpdate($this->inputs['status']);\r\n            exit(json_encode(array(\r\n                \"success\" => true,\r\n                \"data\" => \"<br />Your status was updated to - <b>{$this->inputs['status']}</b>\",\r\n                \"messages\" => $this->messages\r\n            )));\r\n        } else {\r\n            exit(json_encode(array(\r\n                \"success\" => false,\r\n                \"errormsg\" => \"There was no text in the submitted status box!\"\r\n            )));\r\n        }\r\n    }\r\n    /**\r\n     * Sends a message to a contact.\r\n     *\r\n     * Depending on the inputs sends a\r\n     * message/video/image/location message to\r\n     * a contact.\r\n     *\r\n     * @return void\r\n     */\r\n    private function sendMessage()\r\n    {\r\n        if (is_array($this->inputs['to'])) {\r\n            $this->connectToWhatsApp();\r\n            foreach ($this->inputs['to'] as $to) {\r\n                if (trim($to) !== '') {\r\n                    if (isset($this->inputs['message']) && trim($this->inputs['message'] !== '')) {\r\n                        $this->wa->sendMessageComposing($to);\r\n                        $this->wa->sendMessage($to, $this->inputs['message']);\r\n                    }\r\n                    if (isset($this->inputs['image']) && $this->inputs['image'] !== false) {\r\n                        $this->wa->sendMessageImage($to, $this->inputs['image']);\r\n                    }\r\n                    if (isset($this->inputs['audio']) && $this->inputs['audio'] !== false) {\r\n                        $this->wa->sendMessageAudio($to, $this->inputs['audio']);\r\n                    }\r\n                    if (isset($this->inputs['video']) && $this->inputs['video'] !== false) {\r\n                        $this->wa->sendMessageVideo($to, $this->inputs['video']);\r\n                    }\r\n                    if (isset($this->inputs['locationname']) && trim($this->inputs['locationname'] !== '')) {\r\n                        $this->wa->sendMessageLocation($to, $this->inputs['userlong'], $this->inputs['userlat'], $this->inputs['locationname'], null);\r\n                    }\r\n                } else {\r\n                    exit(json_encode(array(\r\n                        \"success\" => false,\r\n                        \"errormsg\" => \"A blank number was provided!\",\r\n                        \"messages\" => $this->messages\r\n                    )));\r\n                }\r\n            }\r\n            exit(json_encode(array(\r\n                \"success\" => true,\r\n                \"data\" => \"Message Sent!\",\r\n                \"messages\" => $this->messages\r\n            )));\r\n        }\r\n        exit(json_encode(array(\r\n            \"success\" => false,\r\n            \"errormsg\" => \"Provided numbers to send message to were not in valid format.\"\r\n        )));\r\n    }\r\n    /**\r\n     * Sends a broadcast Message to a group of contacts.\r\n     *\r\n     * Currenly only sends a normal message to\r\n     * a group of contacts.\r\n     *\r\n     * @return void\r\n     */\r\n    private function sendBroadcast()\r\n    {\r\n        if (isset($this->inputs['action']) && trim($this->inputs['action']) == 'sendBroadcast') {\r\n            $this->connectToWhatsApp();\r\n            if (isset($this->inputs['message']) && trim($this->inputs['message'] !== '')) {\r\n                $this->wa->sendBroadcastMessage($this->inputs['to'], $this->inputs['message']);\r\n            }\r\n            if (isset($this->inputs['image']) && $this->inputs['image'] !== false) {\r\n                $this->wa->sendBroadcastImage($this->inputs['to'], $this->inputs['image']);\r\n            }\r\n            if (isset($this->inputs['audio']) && $this->inputs['audio'] !== false) {\r\n                $this->wa->sendBroadcastAudio($this->inputs['to'], $this->inputs['audio']);\r\n            }\r\n            if (isset($this->inputs['video']) && $this->inputs['video'] !== false) {\r\n                $this->wa->sendBroadcastVideo($this->inputs['to'], $this->inputs['video']);\r\n            }\r\n            if (isset($this->inputs['locationname']) && trim($this->inputs['locationname'] !== '')) {\r\n                $this->wa->sendBroadcastPlace($this->inputs['to'], $this->inputs['userlong'], $this->inputs['userlat'], $this->inputs['locationname'], null);\r\n            }\r\n            exit(json_encode(array(\r\n                \"success\" => true,\r\n                \"data\" => \"Broadcast Message Sent!\",\r\n                \"messages\" => $this->messages\r\n            )));\r\n        }\r\n    }\r\n    /**\r\n     * Process the web login page.\r\n     *\r\n     * @return void\r\n     */\r\n    private function webLogin()\r\n    {\r\n        if ($this->inputs['password'] == $this->config['webpassword']) {\r\n            $_SESSION['logged_in'] = true;\r\n            exit($this->showWebForm());\r\n        } else {\r\n            $error = \"Sorry your password was incorrect.\";\r\n            exit($this->showWebLoginForm($error));\r\n        }\r\n    }\r\n    /**\r\n     * Logout of the webapp\r\n     *\r\n     * @return void\r\n     */\r\n    private function webLogout()\r\n    {\r\n        unset($_SESSION['logged_in']);\r\n    }\r\n    /**\r\n     * Show Web app Login page\r\n     *\r\n     * @return void\r\n     */\r\n    public function showWebLoginForm($error = null)\r\n    {\r\n        ob_start();\r\n        ?>\r\n        <!DOCTYPE html>\r\n        <html lang=\"en\">\r\n            <head>\r\n                <meta charset=\"utf-8\">\r\n                <title>Personal Whatsapp Login</title>\r\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                <meta name=\"description\" content=\"\">\r\n                <meta name=\"author\" content=\"\">\r\n\r\n                <!-- Styles -->\r\n                <link href=\"//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n                <style type=\"text/css\">\r\n                    body {\r\n                        padding-top: 40px;\r\n                        padding-bottom: 40px;\r\n                        background-color: #f5f5f5;\r\n                    }\r\n                    h2 {\r\n                        font-size: 24px;\r\n                    }\r\n                    .form-signin, .error {\r\n                        max-width: 300px;\r\n                        padding: 20px 40px;\r\n                        margin: 10px auto;\r\n                        background-color: #fff;\r\n                        border: 1px solid #e5e5e5;\r\n                        -webkit-border-radius: 5px;\r\n                        -moz-border-radius: 5px;\r\n                        border-radius: 5px;\r\n                        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);\r\n                        -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);\r\n                        box-shadow: 0 1px 2px rgba(0,0,0,.05);\r\n                    }\r\n                    .form-signin input[type=\"password\"] {\r\n                        font-size: 16px;\r\n                        height: auto;\r\n                        margin-bottom: 15px;\r\n                        padding: 7px 9px;\r\n                    }\r\n                    .error {\r\n                        background-color: pink;\r\n                        padding: 10px;\r\n                    }\r\n                </style>\r\n                <link href=\"//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css\" rel=\"stylesheet\">\r\n\r\n            </head>\r\n\r\n            <body>\r\n                <div class=\"container\">\r\n                    <form class=\"form-signin\" action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\r\n                        <?php\r\n                        if (isset($error)) {\r\n                            echo \"<div class='error'>Sorry the password was invalid. Please try again.</div>\";\r\n                        }\r\n                        ?>\r\n                        <input type=\"hidden\" name=\"action\" value=\"login\">\r\n                        <h2 class=\"form-signin-heading\">Whatsapp! Login</h2>\r\n                        <input type=\"password\" name=\"password\" class=\"input-block-level\" placeholder=\"Password\">\r\n                        <div class=\"pagination-centered\">\r\n                            <button class=\"btn btn-large btn-primary\" type=\"submit\">Sign in</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </body>\r\n        </html>\r\n        <?php\r\n        return ob_get_clean();\r\n    }\r\n    /**\r\n     * Show main Web App.\r\n     *\r\n     * @return void\r\n     */\r\n    private function showWebForm()\r\n    {\r\n        ob_start();\r\n        if (!isset($_SESSION)) {\r\n            session_name('wa_session');\r\n            session_start(); // Start the php session\r\n        }\r\n        ?>\r\n        <!DOCTYPE html>\r\n        <html lang=\"en\">\r\n            <head>\r\n                <meta charset=\"utf-8\">\r\n                <title>Personal Whatsapp</title>\r\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                <meta name=\"description\" content=\"\">\r\n                <meta name=\"author\" content=\"\">\r\n\r\n                <!-- Styles -->\r\n                <link href=\"//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n                <link href=\"chosen/chosen.css\" rel=\"stylesheet\">\r\n                <link href=\"emoji/emojisprite.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n                <style type=\"text/css\">\r\n                    body {\r\n                        background-color: #f5f5f5;\r\n                    }\r\n                    .container{\r\n                        width: 320px;\r\n                    }\r\n                    h2 {\r\n                        font-size: 24px;\r\n                        text-align: center;\r\n                        margin:0;\r\n                    }\r\n                    #inboundMessage, #results {\r\n                        padding-left: 5px;\r\n                    }\r\n                    .form-horizontal {\r\n                        width: 300px;\r\n                        padding: 10px 10px 10px 5px;\r\n                        margin: 5px auto;\r\n                        background-color: #fff;\r\n                        border: 1px solid #e5e5e5;\r\n                        border-radius: 5px;\r\n                        -webkit-border-radius: 5px;\r\n                        -moz-border-radius: 5px;\r\n                        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);\r\n                        -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);\r\n                        box-shadow: 0 1px 2px rgba(0,0,0,.05);\r\n                    }\r\n                    .form-horizontal .form-heading\r\n                    {\r\n                        margin-bottom: 10px;\r\n                    }\r\n                    .form-horizontal .control-label{\r\n                        width: 45px;\r\n                    }\r\n                    .form-horizontal .controls{\r\n                        margin-left: 55px;\r\n                        width: 248px;\r\n                    }\r\n                    .form-horizontal .control-group{\r\n                        margin-bottom: 5px;\r\n                    }\r\n                    .input-prepend input[id*='user']{\r\n                        width: 70px;\r\n                    }\r\n                    .input-prepend input{\r\n                        width:206px;\r\n                    }\r\n                    .nav-tabs {\r\n                        border-bottom:transparent;\r\n                    }\r\n                    #faketextbox {\r\n                        height: 90px;\r\n                        display:block;\r\n                        background-color: #FFF;\r\n                        padding: 5px;\r\n                        border: 1px solid #e5e5e5;\r\n                        border-radius: 5px;\r\n                        -webkit-border-radius: 5px;\r\n                        -moz-border-radius: 5px;\r\n                        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);\r\n                        -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);\r\n                        box-shadow: 0 1px 2px rgba(0,0,0,.05);\r\n                        font-size: 13px;\r\n                        overflow-y: auto;\r\n                        white-space: pre-wrap;\r\n                    }\r\n                    img.emoji {\r\n                        content: \"\";\r\n                        padding: 2px;\r\n                        display:inline-block;\r\n                        cursor: pointer;\r\n                    }\r\n                    img.emoji:hover{\r\n                        background-color:lightskyblue;\r\n                        -webkit-border-radius: 5px;\r\n                    }\r\n                    .nav-tabs>li>a {\r\n                        padding: 0 5px;\r\n                        line-height: 15px;\r\n                        font-size: 10px;\r\n                    }\r\n                    .emojicontainer{\r\n                        margin-left: 55px;\r\n                        width: 247px;\r\n                    }\r\n                    #emojiTab.nav{\r\n                        margin-bottom: 3px;\r\n                    }\r\n                    #emojiTab ul.dropdown-menu{\r\n                        min-width:194px;\r\n                        padding: 6px;\r\n                    }\r\n                    #map_canvas{\r\n                        width: 247px;\r\n                        height: 300px;\r\n                        margin-bottom: 5px;\r\n                    }\r\n                    #pickLocation{\r\n                        margin-left: 12px;\r\n                    }\r\n                    #mapContainer input{\r\n                        width: 130px;\r\n                        position: relative;\r\n                        top: 30px;\r\n                        left: 3px;\r\n                        z-index: 5;\r\n                        background-color: #fff;\r\n                        padding: 2px;\r\n                        border: 1px solid #999;\r\n                    }\r\n                    .chzn-container-single .chzn-single{\r\n                        height:28px;\r\n                        line-height: 28px;\r\n                    }\r\n                    .chzn-container-multi .chzn-choices li{\r\n                        float:none;\r\n                    }\r\n                    .chzn-container-multi .chzn-choices .search-choice{\r\n                        margin-right: 3px;\r\n                    }\r\n                    .chzn-container-multi .chzn-choices .search-field{\r\n                        height: 28px;\r\n                        line-height: 28px;\r\n                    }\r\n                    div#to_chzn a.error{\r\n                        color: #b94a48;\r\n                        border-color: #b94a48;\r\n                    }\r\n                    div#to_chzn a.success{\r\n                        color: #468847;\r\n                        border-color: #468847;\r\n                    }\r\n                    div.pac-container{\r\n                        width: 242px !important;\r\n                    }\r\n                    #formcontrols button{\r\n                        width: 48%;\r\n                        height: 50px;\r\n                    }\r\n                    /* Large desktop */\r\n                    @media (min-width: 1200px) {\r\n                        #formcontrols button{height: 30px;}\r\n                    }\r\n                    /* Portrait tablet to landscape and desktop */\r\n                    @media (min-width: 768px) and (max-width: 979px) {\r\n                    }\r\n                    /* Landscape phone to portrait tablet */\r\n                    @media (max-width: 767px) {\r\n                    }\r\n                    /* Landscape phones and down */\r\n                    @media (max-width: 480px) {\r\n                    }\r\n                </style>\r\n\r\n                <!-- Javascript -->\r\n                <script type=\"text/javascript\" src=\"//code.jquery.com/jquery-1.8.3.min.js\"></script>\r\n                <script type=\"text/javascript\" src=\"//ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js\"></script>\r\n                <!-- Chosen \"fork\" originally from here due ability to add number not found in list: https://github.com/koenpunt/chosen  -->\r\n                <script type=\"text/javascript\" src=\"chosen/chosen.jquery.min.js\"></script>\r\n                <!-- Blockui fork from: http://www.malsup.com/jquery/block/-->\r\n                <script type=\"text/javascript\" src=\"//scottjehl.github.io/iOS-Orientationchange-Fix/ios-orientationchange-fix.js\"></script>\r\n                <script type=\"text/javascript\" src=\"//bainternet-js-cdn.googlecode.com/svn/trunk/js/jQuery%20BlockUI%20Plugin/2.39/jquery.blockUI.js\"></script>\r\n                <script type=\"text/javascript\" src=\"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js\"></script>\r\n                <script type=\"text/javascript\" src=\"//cdn.jsdelivr.net/gmap3/5.0b/gmap3.min.js\"></script>\r\n                <script type=\"text/javascript\" src=\"//maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places\" ></script>\r\n\r\n                <script type=\"text/javascript\">\r\n                    $(document).ready(function() {\r\n                        $(document).ajaxStop(function() {\r\n                            $.unblockUI();\r\n                        });\r\n                        $(document).ajaxStart(function() {\r\n                            $.blockUI();\r\n                        });\r\n                        $(\"#action\").change(function() {\r\n                            var val = $(this).val();\r\n                            doAction(val);\r\n                        });\r\n                        createChosen();\r\n                        $('#to').bind(\"change\", function() {\r\n                            $('#whatsappform').validate().element($(this));\r\n                        });\r\n                        $('#from').bind(\"change\", function() {\r\n                            doAction('getContacts');\r\n                        });\r\n                        function doAction(type)\r\n                        {\r\n                            switch (type) {\r\n                                case 'sendMessage':\r\n                                    $('#to').prop('multiple', false);\r\n                                    $(\"#to\").prop('disabled', false);\r\n                                    createChosen();\r\n                                    $(\"#to\").closest('div.control-group').show();\r\n                                    $('#emojiTab').show();\r\n                                    $(\"#faketextbox\").prop('disabled', false);\r\n                                    $(\"#faketextbox\").closest('div.control-group').show();\r\n                                    $(\"#image\").prop('disabled', false);\r\n                                    $(\"#image\").closest('div.control-group').show();\r\n                                    $(\"#audio\").prop('disabled', false);\r\n                                    $(\"#audio\").closest('div.control-group').show();\r\n                                    $(\"#video\").prop('disabled', false);\r\n                                    $(\"#video\").closest('div.control-group').show();\r\n                                    $(\"#locationname\").prop('disabled', false);\r\n                                    $(\"#userlat\").prop('disabled', false);\r\n                                    $(\"#userlong\").prop('disabled', false);\r\n                                    $(\"#locationname\").closest('div.control-group').show();\r\n                                    $(\"#pickLocation\").show();\r\n                                    $(\"#status\").prop('disabled', true);\r\n                                    $(\"#status\").closest('div.control-group').hide();\r\n                                    break;\r\n                                case 'updateStatus':\r\n                                    $(\"#to\").prop('disabled', true);\r\n                                    $(\"#to\").closest('div.control-group').hide();\r\n                                    $('#emojiTab').hide();\r\n                                    $(\"#faketextbox\").prop('disabled', true);\r\n                                    $(\"#faketextbox\").closest('div.control-group').hide();\r\n                                    $(\"#image\").prop('disabled', true);\r\n                                    $(\"#image\").closest('div.control-group').hide();\r\n                                    $(\"#audio\").prop('disabled', true);\r\n                                    $(\"#audio\").closest('div.control-group').hide();\r\n                                    $(\"#video\").prop('disabled', true);\r\n                                    $(\"#video\").closest('div.control-group').hide();\r\n                                    $(\"#locationname\").prop('disabled', true);\r\n                                    $(\"#userlat\").prop('disabled', true);\r\n                                    $(\"#userlong\").prop('disabled', true);\r\n                                    $(\"#locationname\").closest('div.control-group').hide();\r\n                                    $(\"#pickLocation\").hide();\r\n                                    $(\"#status\").prop('disabled', false);\r\n                                    $(\"#status\").closest('div.control-group').show();\r\n                                    break;\r\n                                case 'sendBroadcast':\r\n                                    $('#to').prop('multiple', true);\r\n                                    $(\"#to\").prop('disabled', false);\r\n                                    createChosen();\r\n                                    $(\"#to\").closest('div.control-group').show();\r\n                                    $('#emojiTab').show();\r\n                                    $(\"#faketextbox\").prop('disabled', false);\r\n                                    $(\"#faketextbox\").closest('div.control-group').show();\r\n                                    $(\"#image\").prop('disabled', false);\r\n                                    $(\"#image\").closest('div.control-group').show();\r\n                                    $(\"#audio\").prop('disabled', false);\r\n                                    $(\"#audio\").closest('div.control-group').show();\r\n                                    $(\"#video\").prop('disabled', false);\r\n                                    $(\"#video\").closest('div.control-group').show();\r\n                                    $(\"#locationname\").prop('disabled', false);\r\n                                    $(\"#userlat\").prop('disabled', false);\r\n                                    $(\"#userlong\").prop('disabled', false);\r\n                                    $(\"#locationname\").closest('div.control-group').show();\r\n                                    $(\"#pickLocation\").show();\r\n                                    $(\"#status\").prop('disabled', true);\r\n                                    $(\"#status\").closest('div.control-group').hide();\r\n                                    break;\r\n                                case 'getContacts':\r\n                                    var fromuser = $(\"#from\").val();\r\n                                    $.ajax({\r\n                                        type: \"POST\",\r\n                                        url: \"<?php echo $_SERVER['PHP_SELF']; ?>\",\r\n                                        cache: false,\r\n                                        data: {action: \"getContacts\", from: fromuser},\r\n                                        dataType: \"json\",\r\n                                        timeout: 15000,\r\n                                        success: onSuccess,\r\n                                        error: onError,\r\n                                        complete: function(jqXHR, textStatus) {\r\n                                            $.unblockUI();\r\n                                        }\r\n                                    });\r\n                                    return false;\r\n                                default:\r\n                                    alert('Error. An action should have been specified.');\r\n                                    return false;\r\n                            }\r\n                        }\r\n                        function createChosen()\r\n                        {\r\n                            $('#to_chzn').remove();\r\n                            $('#to').removeClass('chzn-done');\r\n                            $(\"#to\").chosen({\r\n                                create_option: true,\r\n                                persistent_create_option: true,\r\n                                no_results_text: \"Can't Find:\",\r\n                                create_option_text: 'Click to Add '\r\n                            });\r\n                            $('#to_chzn').css('width', '220px');\r\n                        };\r\n                        $(\"img\").on('click', function() {\r\n                            var txtToAdd = this.outerHTML;\r\n                            $(\"#faketextbox\").append(txtToAdd);\r\n                        });\r\n                        $('#mapContainer').hide();\r\n                        $('#pickLocation').click(function() {\r\n                            if ($('#mapContainer').is(':visible')) {\r\n                                $('#mapContainer').hide();\r\n                                return false;\r\n                            } else {\r\n                                $('#mapContainer').show();\r\n                                createMap();\r\n                                return false;\r\n                            }\r\n                        });\r\n                        function createMap()\r\n                        {\r\n                            var map = new google.maps.Map(document.getElementById('map_canvas'), {\r\n                                center: new google.maps.LatLng(53.4, -7.778),\r\n                                mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                                zoom: 6,\r\n                                panControl: false,\r\n                                streetViewControl: true,\r\n                                streetViewOptions: {\r\n                                    position: google.maps.ControlPosition.LEFT_CENTER\r\n                                },\r\n                                mapTypeControl: true,\r\n                                mapTypeControlOptions: {\r\n                                    style: google.maps.MapTypeControlStyle.DROPDOWN_MENU\r\n                                },\r\n                                zoomControl: true,\r\n                                zoomControlOptions: {\r\n                                    style: google.maps.ZoomControlStyle.SMALL,\r\n                                    position: google.maps.ControlPosition.LEFT_CENTER\r\n                                }\r\n                            });\r\n                            var input = (document.getElementById('target'));\r\n                            var searchBox = new google.maps.places.SearchBox(input);\r\n                            var marker;\r\n                            google.maps.event.addListener(searchBox, 'places_changed', function() {\r\n                                var places = searchBox.getPlaces();\r\n                                placeMarker(places[0].geometry.location);\r\n                                map.setZoom(16);\r\n                                map.setCenter(marker.getPosition());\r\n                            });\r\n                            function placeMarker(location)\r\n                            {\r\n                                if (marker) {\r\n                                    marker.setPosition(location);\r\n                                } else {\r\n                                    marker = new google.maps.Marker({\r\n                                        position: location,\r\n                                        map: map\r\n                                    });\r\n                                }\r\n                                updateLocation(location);\r\n                            }\r\n                            function updateLocation(event)\r\n                            {\r\n                                if ($('#target').val() !== '') {\r\n                                    $('#locationname').val($('#target').val());\r\n                                }\r\n                                $('#userlat').val(event.lat().toFixed(5));\r\n                                $('#userlong').val(event.lng().toFixed(6));\r\n                            }\r\n                            google.maps.event.addListener(map, 'click', function(event) {\r\n                                placeMarker(event.latLng);\r\n                                var geocoder = new google.maps.Geocoder();\r\n                                geocoder.geocode({\r\n                                    \"latLng\": event.latLng\r\n                                }, function(results, status) {\r\n                                    if (status === google.maps.GeocoderStatus.OK) {\r\n                                        //                                        var lat = results[0].geometry.location.lat(),\r\n                                        //                                                lng = results[0].geometry.location.lng();\r\n                                        $(\"#locationname\").val(results[0].formatted_address);\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                        //if form is submitted\r\n                        $('#whatsappform').submit(function(e) {\r\n                            if ($('#whatsappform').validate().form() === false) {\r\n                                return false;\r\n                            }\r\n                            //Store original html to replace back in box later.\r\n                            var original = $('#faketextbox').html();\r\n                            //Scan html code for emojis and replace with text and special marker.\r\n                            $('#faketextbox img').each(function(index) {\r\n                                var emojiUnicode = this.outerHTML.match(/emoji-(.*?)\"/)[1];\r\n                                $(this).replaceWith('##' + emojiUnicode + '##');\r\n                            });\r\n                            //Replace all BR's with line breaks.\r\n                            var message = $.trim($('#faketextbox').html().replace(/<br\\s?\\/?>/g, \"\\n\"));\r\n                            //Copy the corrected message text to our hidden input field to be serialised.\r\n                            $('#message').val($('#faketextbox').html(message).text());\r\n                            //Replace the corrected text with the original html so it shows properly on a browser.\r\n                            $('#faketextbox').html(original);\r\n                            //Continue with the form.\r\n                            var formData = $(\"#whatsappform\").serialize();\r\n                            $.ajax({\r\n                                type: \"POST\",\r\n                                url: \"<?php echo $_SERVER['PHP_SELF'] ?>\",\r\n                                cache: false,\r\n                                data: formData,\r\n                                dataType: \"json\",\r\n                                timeout: 45000,\r\n                                success: onSuccess,\r\n                                error: onError,\r\n                                //beforeSend: function(jqXHR, settings) {\r\n                                //},\r\n                                complete: function() {\r\n                                    $.unblockUI();\r\n                                }\r\n                            });\r\n                            return false;\r\n                        });\r\n                        $(\"#whatsappform\").validate({\r\n                            ignore: \":hidden:not(select)\",\r\n                            rules: {\r\n                                from: {\r\n                                    required: true\r\n                                },\r\n                                to: {\r\n                                    required: true\r\n                                },\r\n                                status: {\r\n                                    minlength: 4,\r\n                                    required: true\r\n                                },\r\n                                password: {\r\n                                    minlength: 2,\r\n                                    required: true\r\n                                }\r\n                            },\r\n                            errorPlacement: function(error, element) {\r\n                                return true;\r\n                            },\r\n                            highlight: function(label) {\r\n                                $(label).closest('.control-group').addClass('error');\r\n                                if (label.id === 'to') {\r\n                                    $('div#to_chzn a').addClass('error');\r\n                                    $('div#to_chzn a').removeClass('success');\r\n                                }\r\n                            },\r\n                            success: function(label) {\r\n                                $(\"#\" + label[0].htmlFor).closest('.control-group').addClass('success');\r\n                                $(\"#\" + label[0].htmlFor).closest('.control-group').removeClass('error');\r\n                                if (label[0].htmlFor === 'to') {\r\n                                    $('div#to_chzn a').addClass('success');\r\n                                    $('div#to_chzn a').removeClass('error');\r\n                                }\r\n                            }\r\n                        });\r\n                        function onSuccess(data, textStatus, jqXHR)\r\n                        {\r\n                            switch (data.success) {\r\n                                case false:\r\n                                    newAlert('error', data.errormsg);\r\n                                    break;\r\n                                case true:\r\n                                    if (data.type === 'contacts') {\r\n                                        $(\"select#to\").html('<option></option>');\r\n                                        $.each(data.data, function(i, item) {\r\n                                            $(\"select#to\").append(\"<option value='\" + data.data[i].id + \"'>\" + data.data[i].name + \"</option>\");\r\n                                        });\r\n                                        $(\"#to\").trigger(\"liszt:updated\");\r\n                                    } else {\r\n                                        newAlert('success', data.data);\r\n                                    }\r\n                                    if (data.messages !== null) {\r\n                                        $.each(data.messages, function(i, item) {\r\n                                            $(\"#inboundMessage\").append(\"<div class='alert alert-block alert-info'>\" + data.messages[i].time + \":<br /> \" + data.messages[i].name + \" (+\" + data.messages[i].from + \")<br />\" + data.messages[i].data + \"</div>\");\r\n                                        });\r\n                                    }\r\n                                    break;\r\n                                default:\r\n                                    newAlert('success', 'The ajax call was successful but there was an error with the data returned: HTTP Status:' + jqXHR.status + \"StatusText\" + jqXHR.statusText);\r\n                                    break;\r\n                            }\r\n                        }\r\n                        function onError(request, type, errorThrown)\r\n                        {\r\n                            var message = \"There was an error with the AJAX request.\\n\";\r\n                            switch (type) {\r\n                                case 'timeout':\r\n                                    message += \"The request timed out.\";\r\n                                    break;\r\n                                case 'notmodified':\r\n                                    message += \"The request was not modified but was not retrieved from the cache.\";\r\n                                    break;\r\n                                case 'parsererror':\r\n                                    message += \"XML/Json format is bad.\";\r\n                                    break;\r\n                                default:\r\n                                    message += \"HTTP Error (\" + request.status + \" \" + request.statusText + \")\\n\\n.\" + request.responseText + errorThrown;\r\n                            }\r\n                            $(\".alert-error\").remove();\r\n                            newAlert('error', message);\r\n                        }\r\n                        function newAlert(type, message)\r\n                        {\r\n                            $(\"#results\").append(\"<div class='alert alert-block alert-\" + type + \"' ><strong>\" + type.charAt(0).toUpperCase() + type.substr(1) + \": </strong>\" + message + \"</div>\");\r\n                            $(\".alert-success\").delay(5000).fadeOut(\"slow\", function() {\r\n                                $(\".alert-error\").remove();\r\n                                $(this).remove();\r\n                            });\r\n                        }\r\n                        $('#logout').bind(\"click\", function() {\r\n                            $.ajax({\r\n                                type: \"POST\",\r\n                                url: \"<?php echo $_SERVER['PHP_SELF']; ?>\",\r\n                                data: {action: \"logout\"},\r\n                                success: function(result) {\r\n                                    window.location.href = \"<?php echo $_SERVER['PHP_SELF']; ?>\";\r\n                                },\r\n                                async: false\r\n                            });\r\n                        });\r\n                    });\r\n                </script>\r\n\r\n            </head>\r\n\r\n            <body>\r\n\r\n                <div class=\"container\">\r\n                    <h2 class=\"form-heading\">Whatsapp! Messenger</h2>\r\n                    <form class=\"form-horizontal\" id=\"whatsappform\">\r\n                        <input type=\"hidden\" name='message' id='message'>\r\n                        <div id=\"results\"></div>\r\n                        <div id=\"inboundMessage\"></div>\r\n                        <fieldset>\r\n                            <div class=\"control-group\">\r\n                                <label class=\"control-label\" for=\"action\">Action</label>\r\n                                <div class=\"controls\">\r\n                                    <div class=\"input-prepend\">\r\n                                        <span class=\"add-on\"><i class=\"icon-wrench\"></i></span>\r\n                                        <select id=\"action\" name=\"action\">\r\n                                            <option value=\"sendMessage\">Send a Message</option>\r\n                                            <option value=\"updateStatus\">Update Status</option>\r\n                                            <option value=\"sendBroadcast\">Send Broadcast</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"control-group\">\r\n                                <label class=\"control-label\" for=\"from\">From</label>\r\n                                <div class=\"controls\">\r\n                                    <div class=\"input-prepend\">\r\n                                        <span class=\"add-on\"><i class=\"icon-user\"></i></span>\r\n                                        <select id=\"from\" name=\"from\" placeholder=\"Choose who to send as...\">\r\n                                            <option value=\"\">Choose Sender...</option> \r\n                                            <?php\r\n                                            foreach (array_keys($this->config) as $key) {\r\n                                                if ($key !== 'webpassword') {\r\n                                                    echo \"<option value='$key'>$key</option>\";\r\n                                                }\r\n                                            }\r\n                                            ?>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"control-group\">\r\n                                <label class=\"control-label\" for=\"to\">To</label>\r\n                                <div class=\"controls\">\r\n                                    <div class=\"input-prepend\">\r\n                                        <span class=\"add-on\"><i class=\"icon-user\"></i></span>\r\n                                        <select id=\"to\" name=\"to[]\" data-placeholder=\"Choose a person/group..\">\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"emojicontainer\">\r\n                                <ul id=\"emojiTab\" class=\"nav nav-tabs\">\r\n                                    <li class=\"dropdown\">\r\n                                        <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\">People</a>\r\n                                        <ul class=\"dropdown-menu\">\r\n                                            <img class=\"emoji emoji-1F604\"> <img class=\"emoji emoji-1F603\"> <img class=\"emoji emoji-1F600\"> <img class=\"emoji emoji-1F60A\"> <img class=\"emoji emoji-263A\"> <img class=\"emoji emoji-1F609\"> <img class=\"emoji emoji-1F60D\">\r\n                                            <img class=\"emoji emoji-1F618\"> <img class=\"emoji emoji-1F61A\"> <img class=\"emoji emoji-1F617\"> <img class=\"emoji emoji-1F619\"> <img class=\"emoji emoji-1F61C\"> <img class=\"emoji emoji-1F61D\"> <img class=\"emoji emoji-1F61B\">\r\n                                            <img class=\"emoji emoji-1F633\"> <img class=\"emoji emoji-1F601\"> <img class=\"emoji emoji-1F614\"> <img class=\"emoji emoji-1F60C\"> <img class=\"emoji emoji-1F612\"> <img class=\"emoji emoji-1F61E\"> <img class=\"emoji emoji-1F623\">\r\n                                            <img class=\"emoji emoji-1F622\"> <img class=\"emoji emoji-1F602\"> <img class=\"emoji emoji-1F62D\"> <img class=\"emoji emoji-1F62A\"> <img class=\"emoji emoji-1F625\"> <img class=\"emoji emoji-1F630\"> <img class=\"emoji emoji-1F605\">\r\n                                            <img class=\"emoji emoji-1F613\"> <img class=\"emoji emoji-1F629\"> <img class=\"emoji emoji-1F62B\"> <img class=\"emoji emoji-1F628\"> <img class=\"emoji emoji-1F631\"> <img class=\"emoji emoji-1F620\"> <img class=\"emoji emoji-1F621\">\r\n                                            <img class=\"emoji emoji-1F624\"> <img class=\"emoji emoji-1F616\"> <img class=\"emoji emoji-1F606\"> <img class=\"emoji emoji-1F60B\"> <img class=\"emoji emoji-1F637\"> <img class=\"emoji emoji-1F60E\"> <img class=\"emoji emoji-1F634\">\r\n                                            <img class=\"emoji emoji-1F635\"> <img class=\"emoji emoji-1F632\"> <img class=\"emoji emoji-1F61F\"> <img class=\"emoji emoji-1F626\"> <img class=\"emoji emoji-1F627\"> <img class=\"emoji emoji-1F608\"> <img class=\"emoji emoji-1F47F\">\r\n                                            <img class=\"emoji emoji-1F62E\"> <img class=\"emoji emoji-1F62C\"> <img class=\"emoji emoji-1F610\"> <img class=\"emoji emoji-1F615\"> <img class=\"emoji emoji-1F62F\"> <img class=\"emoji emoji-1F636\"> <img class=\"emoji emoji-1F607\">\r\n                                            <img class=\"emoji emoji-1F60F\"> <img class=\"emoji emoji-1F611\"> <img class=\"emoji emoji-1F472\"> <img class=\"emoji emoji-1F473\"> <img class=\"emoji emoji-1F46E\"> <img class=\"emoji emoji-1F477\"> <img class=\"emoji emoji-1F482\">\r\n                                            <img class=\"emoji emoji-1F476\"> <img class=\"emoji emoji-1F466\"> <img class=\"emoji emoji-1F467\"> <img class=\"emoji emoji-1F468\"> <img class=\"emoji emoji-1F469\"> <img class=\"emoji emoji-1F474\"> <img class=\"emoji emoji-1F475\">\r\n                                            <img class=\"emoji emoji-1F471\"> <img class=\"emoji emoji-1F47C\"> <img class=\"emoji emoji-1F478\"> <img class=\"emoji emoji-1F63A\"> <img class=\"emoji emoji-1F638\"> <img class=\"emoji emoji-1F63B\"> <img class=\"emoji emoji-1F63D\">\r\n                                            <img class=\"emoji emoji-1F63C\"> <img class=\"emoji emoji-1F640\"> <img class=\"emoji emoji-1F63F\"> <img class=\"emoji emoji-1F639\"> <img class=\"emoji emoji-1F63E\"> <img class=\"emoji emoji-1F479\"> <img class=\"emoji emoji-1F47A\">\r\n                                            <img class=\"emoji emoji-1F648\"> <img class=\"emoji emoji-1F649\"> <img class=\"emoji emoji-1F64A\"> <img class=\"emoji emoji-1F480\"> <img class=\"emoji emoji-1F47D\"> <img class=\"emoji emoji-1F4A9\"> <img class=\"emoji emoji-1F525\">\r\n                                            <img class=\"emoji emoji-2728\"> <img class=\"emoji emoji-1F31F\"> <img class=\"emoji emoji-1F4AB\"> <img class=\"emoji emoji-1F4A5\"> <img class=\"emoji emoji-1F4A2\"> <img class=\"emoji emoji-1F4A6\"> <img class=\"emoji emoji-1F4A7\">\r\n                                            <img class=\"emoji emoji-1F4A4\"> <img class=\"emoji emoji-1F4A8\"> <img class=\"emoji emoji-1F442\"> <img class=\"emoji emoji-1F440\"> <img class=\"emoji emoji-1F443\"> <img class=\"emoji emoji-1F445\"> <img class=\"emoji emoji-1F444\">\r\n                                            <img class=\"emoji emoji-1F44D\"> <img class=\"emoji emoji-1F44E\"> <img class=\"emoji emoji-1F44C\"> <img class=\"emoji emoji-1F44A\"> <img class=\"emoji emoji-270A\"> <img class=\"emoji emoji-270C\"> <img class=\"emoji emoji-1F44B\">\r\n                                            <img class=\"emoji emoji-270B\"> <img class=\"emoji emoji-1F450\"> <img class=\"emoji emoji-1F446\"> <img class=\"emoji emoji-1F447\"> <img class=\"emoji emoji-1F449\"> <img class=\"emoji emoji-1F448\"> <img class=\"emoji emoji-1F64C\">\r\n                                            <img class=\"emoji emoji-1F64F\"> <img class=\"emoji emoji-261D\"> <img class=\"emoji emoji-1F44F\"> <img class=\"emoji emoji-1F4AA\"> <img class=\"emoji emoji-1F6B6\"> <img class=\"emoji emoji-1F3C3\"> <img class=\"emoji emoji-1F483\">\r\n                                            <img class=\"emoji emoji-1F46B\"> <img class=\"emoji emoji-1F46A\"> <img class=\"emoji emoji-1F46C\"> <img class=\"emoji emoji-1F46D\"> <img class=\"emoji emoji-1F48F\"> <img class=\"emoji emoji-1F491\"> <img class=\"emoji emoji-1F46F\">\r\n                                            <img class=\"emoji emoji-1F646\"> <img class=\"emoji emoji-1F645\"> <img class=\"emoji emoji-1F481\"> <img class=\"emoji emoji-1F64B\"> <img class=\"emoji emoji-1F486\"> <img class=\"emoji emoji-1F487\"> <img class=\"emoji emoji-1F485\">\r\n                                            <img class=\"emoji emoji-1F470\"> <img class=\"emoji emoji-1F64E\"> <img class=\"emoji emoji-1F64D\"> <img class=\"emoji emoji-1F647\"> <img class=\"emoji emoji-1F3A9\"> <img class=\"emoji emoji-1F451\"> <img class=\"emoji emoji-1F452\">\r\n                                            <img class=\"emoji emoji-1F45F\"> <img class=\"emoji emoji-1F45E\"> <img class=\"emoji emoji-1F461\"> <img class=\"emoji emoji-1F460\"> <img class=\"emoji emoji-1F462\"> <img class=\"emoji emoji-1F455\"> <img class=\"emoji emoji-1F454\">\r\n                                            <img class=\"emoji emoji-1F45A\"> <img class=\"emoji emoji-1F457\"> <img class=\"emoji emoji-1F3BD\"> <img class=\"emoji emoji-1F456\"> <img class=\"emoji emoji-1F458\"> <img class=\"emoji emoji-1F459\"> <img class=\"emoji emoji-1F4BC\">\r\n                                            <img class=\"emoji emoji-1F45C\"> <img class=\"emoji emoji-1F45D\"> <img class=\"emoji emoji-1F45B\"> <img class=\"emoji emoji-1F453\"> <img class=\"emoji emoji-1F380\"> <img class=\"emoji emoji-1F302\"> <img class=\"emoji emoji-1F484\">\r\n                                            <img class=\"emoji emoji-1F49B\"> <img class=\"emoji emoji-1F499\"> <img class=\"emoji emoji-1F49C\"> <img class=\"emoji emoji-1F49A\"> <img class=\"emoji emoji-2764\"> <img class=\"emoji emoji-1F494\"> <img class=\"emoji emoji-1F497\">\r\n                                            <img class=\"emoji emoji-1F493\"> <img class=\"emoji emoji-1F495\"> <img class=\"emoji emoji-1F496\"> <img class=\"emoji emoji-1F49E\"> <img class=\"emoji emoji-1F498\"> <img class=\"emoji emoji-1F48C\"> <img class=\"emoji emoji-1F48B\">\r\n                                            <img class=\"emoji emoji-1F48D\"> <img class=\"emoji emoji-1F48E\"> <img class=\"emoji emoji-1F464\"> <img class=\"emoji emoji-1F465\"> <img class=\"emoji emoji-1F4AC\"> <img class=\"emoji emoji-1F463\"> <img class=\"emoji emoji-1F4AD\">\r\n                                        </ul>\r\n                                    </li>\r\n\r\n                                    <li class=\"dropdown\">\r\n                                        <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\">Nature</a>\r\n                                        <ul class=\"dropdown-menu\">\r\n                                            <img class=\"emoji emoji-1F436\"> <img class=\"emoji emoji-1F43A\"> <img class=\"emoji emoji-1F431\"> <img class=\"emoji emoji-1F42D\"> <img class=\"emoji emoji-1F439\"> <img class=\"emoji emoji-1F430\"> <img class=\"emoji emoji-1F438\">\r\n                                            <img class=\"emoji emoji-1F42F\"> <img class=\"emoji emoji-1F428\"> <img class=\"emoji emoji-1F43B\"> <img class=\"emoji emoji-1F437\"> <img class=\"emoji emoji-1F43D\"> <img class=\"emoji emoji-1F42E\"> <img class=\"emoji emoji-1F417\">\r\n                                            <img class=\"emoji emoji-1F435\"> <img class=\"emoji emoji-1F412\"> <img class=\"emoji emoji-1F434\"> <img class=\"emoji emoji-1F411\"> <img class=\"emoji emoji-1F418\"> <img class=\"emoji emoji-1F43C\"> <img class=\"emoji emoji-1F427\">\r\n                                            <img class=\"emoji emoji-1F426\"> <img class=\"emoji emoji-1F424\"> <img class=\"emoji emoji-1F425\"> <img class=\"emoji emoji-1F423\"> <img class=\"emoji emoji-1F414\"> <img class=\"emoji emoji-1F40D\"> <img class=\"emoji emoji-1F422\">\r\n                                            <img class=\"emoji emoji-1F41B\"> <img class=\"emoji emoji-1F41D\"> <img class=\"emoji emoji-1F41C\"> <img class=\"emoji emoji-1F41E\"> <img class=\"emoji emoji-1F40C\"> <img class=\"emoji emoji-1F419\"> <img class=\"emoji emoji-1F41A\">\r\n                                            <img class=\"emoji emoji-1F420\"> <img class=\"emoji emoji-1F41F\"> <img class=\"emoji emoji-1F42C\"> <img class=\"emoji emoji-1F433\"> <img class=\"emoji emoji-1F40B\"> <img class=\"emoji emoji-1F404\"> <img class=\"emoji emoji-1F40F\">\r\n                                            <img class=\"emoji emoji-1F400\"> <img class=\"emoji emoji-1F403\"> <img class=\"emoji emoji-1F405\"> <img class=\"emoji emoji-1F407\"> <img class=\"emoji emoji-1F409\"> <img class=\"emoji emoji-1F40E\"> <img class=\"emoji emoji-1F410\">\r\n                                            <img class=\"emoji emoji-1F413\"> <img class=\"emoji emoji-1F415\"> <img class=\"emoji emoji-1F416\"> <img class=\"emoji emoji-1F401\"> <img class=\"emoji emoji-1F402\"> <img class=\"emoji emoji-1F432\"> <img class=\"emoji emoji-1F421\">\r\n                                            <img class=\"emoji emoji-1F40A\"> <img class=\"emoji emoji-1F42B\"> <img class=\"emoji emoji-1F42A\"> <img class=\"emoji emoji-1F406\"> <img class=\"emoji emoji-1F408\"> <img class=\"emoji emoji-1F429\"> <img class=\"emoji emoji-1F43E\">\r\n                                            <img class=\"emoji emoji-1F490\"> <img class=\"emoji emoji-1F338\"> <img class=\"emoji emoji-1F337\"> <img class=\"emoji emoji-1F340\"> <img class=\"emoji emoji-1F339\"> <img class=\"emoji emoji-1F33B\"> <img class=\"emoji emoji-1F33A\">\r\n                                            <img class=\"emoji emoji-1F341\"> <img class=\"emoji emoji-1F343\"> <img class=\"emoji emoji-1F342\"> <img class=\"emoji emoji-1F33F\"> <img class=\"emoji emoji-1F33E\"> <img class=\"emoji emoji-1F344\"> <img class=\"emoji emoji-1F335\">\r\n                                            <img class=\"emoji emoji-1F334\"> <img class=\"emoji emoji-1F332\"> <img class=\"emoji emoji-1F333\"> <img class=\"emoji emoji-1F330\"> <img class=\"emoji emoji-1F331\"> <img class=\"emoji emoji-1F33C\"> <img class=\"emoji emoji-1F310\">\r\n                                            <img class=\"emoji emoji-1F31E\"> <img class=\"emoji emoji-1F31D\"> <img class=\"emoji emoji-1F31A\"> <img class=\"emoji emoji-1F311\"> <img class=\"emoji emoji-1F312\"> <img class=\"emoji emoji-1F313\"> <img class=\"emoji emoji-1F314\">\r\n                                            <img class=\"emoji emoji-1F315\"> <img class=\"emoji emoji-1F316\"> <img class=\"emoji emoji-1F317\"> <img class=\"emoji emoji-1F318\"> <img class=\"emoji emoji-1F31C\"> <img class=\"emoji emoji-1F31B\"> <img class=\"emoji emoji-1F319\">\r\n                                            <img class=\"emoji emoji-1F30D\"> <img class=\"emoji emoji-1F30E\"> <img class=\"emoji emoji-1F30F\"> <img class=\"emoji emoji-1F30B\"> <img class=\"emoji emoji-1F30C\"> <img class=\"emoji emoji-1F320\"> <img class=\"emoji emoji-2B50\">\r\n                                            <img class=\"emoji emoji-2600\"> <img class=\"emoji emoji-26C5\"> <img class=\"emoji emoji-2601\"> <img class=\"emoji emoji-26A1\"> <img class=\"emoji emoji-2614\"> <img class=\"emoji emoji-2744\"> <img class=\"emoji emoji-26C4\">\r\n                                            <img class=\"emoji emoji-1F300\"> <img class=\"emoji emoji-1F301\"> <img class=\"emoji emoji-1F308\"> <img class=\"emoji emoji-1F30A\">\r\n                                        </ul>\r\n                                    </li>\r\n\r\n                                    <li class=\"dropdown\">\r\n                                        <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\">Objects</a>\r\n                                        <ul class=\"dropdown-menu\">\r\n                                            <img class=\"emoji emoji-1F38D\"> <img class=\"emoji emoji-1F49D\"> <img class=\"emoji emoji-1F38E\"> <img class=\"emoji emoji-1F392\"> <img class=\"emoji emoji-1F393\"> <img class=\"emoji emoji-1F38F\"> <img class=\"emoji emoji-1F386\">\r\n                                            <img class=\"emoji emoji-1F387\"> <img class=\"emoji emoji-1F390\"> <img class=\"emoji emoji-1F391\"> <img class=\"emoji emoji-1F383\"> <img class=\"emoji emoji-1F47B\"> <img class=\"emoji emoji-1F385\"> <img class=\"emoji emoji-1F384\">\r\n                                            <img class=\"emoji emoji-1F381\"> <img class=\"emoji emoji-1F38B\"> <img class=\"emoji emoji-1F389\"> <img class=\"emoji emoji-1F38A\"> <img class=\"emoji emoji-1F388\"> <img class=\"emoji emoji-1F38C\"> <img class=\"emoji emoji-1F52E\">\r\n                                            <img class=\"emoji emoji-1F3A5\"> <img class=\"emoji emoji-1F4F7\"> <img class=\"emoji emoji-1F4F9\"> <img class=\"emoji emoji-1F4FC\"> <img class=\"emoji emoji-1F4BF\"> <img class=\"emoji emoji-1F4C0\"> <img class=\"emoji emoji-1F4BD\">\r\n                                            <img class=\"emoji emoji-1F4BE\"> <img class=\"emoji emoji-1F4BB\"> <img class=\"emoji emoji-1F4F1\"> <img class=\"emoji emoji-260E\"> <img class=\"emoji emoji-1F4DE\"> <img class=\"emoji emoji-1F4DF\"> <img class=\"emoji emoji-1F4E0\">\r\n                                            <img class=\"emoji emoji-1F4E1\"> <img class=\"emoji emoji-1F4FA\"> <img class=\"emoji emoji-1F4FB\"> <img class=\"emoji emoji-1F50A\"> <img class=\"emoji emoji-1F509\"> <img class=\"emoji emoji-1F508\"> <img class=\"emoji emoji-1F507\">\r\n                                            <img class=\"emoji emoji-1F514\"> <img class=\"emoji emoji-1F515\"> <img class=\"emoji emoji-1F4E2\"> <img class=\"emoji emoji-1F4E3\"> <img class=\"emoji emoji-23F3\"> <img class=\"emoji emoji-231B\"> <img class=\"emoji emoji-23F0\">\r\n                                            <img class=\"emoji emoji-231A\"> <img class=\"emoji emoji-1F513\"> <img class=\"emoji emoji-1F512\"> <img class=\"emoji emoji-1F50F\"> <img class=\"emoji emoji-1F510\"> <img class=\"emoji emoji-1F511\"> <img class=\"emoji emoji-1F50E\">\r\n                                            <img class=\"emoji emoji-1F4A1\"> <img class=\"emoji emoji-1F526\"> <img class=\"emoji emoji-1F506\"> <img class=\"emoji emoji-1F505\"> <img class=\"emoji emoji-1F50C\"> <img class=\"emoji emoji-1F50B\"> <img class=\"emoji emoji-1F50D\">\r\n                                            <img class=\"emoji emoji-1F6C1\"> <img class=\"emoji emoji-1F6C0\"> <img class=\"emoji emoji-1F6BF\"> <img class=\"emoji emoji-1F6BD\"> <img class=\"emoji emoji-1F527\"> <img class=\"emoji emoji-1F529\"> <img class=\"emoji emoji-1F528\">\r\n                                            <img class=\"emoji emoji-1F6AA\"> <img class=\"emoji emoji-1F6AC\"> <img class=\"emoji emoji-1F4A3\"> <img class=\"emoji emoji-1F52B\"> <img class=\"emoji emoji-1F52A\"> <img class=\"emoji emoji-1F48A\"> <img class=\"emoji emoji-1F489\">\r\n                                            <img class=\"emoji emoji-1F4B0\"> <img class=\"emoji emoji-1F4B4\"> <img class=\"emoji emoji-1F4B5\"> <img class=\"emoji emoji-1F4B7\"> <img class=\"emoji emoji-1F4B6\"> <img class=\"emoji emoji-1F4B3\"> <img class=\"emoji emoji-1F4B8\">\r\n                                            <img class=\"emoji emoji-1F4F2\"> <img class=\"emoji emoji-1F4E7\"> <img class=\"emoji emoji-1F4E5\"> <img class=\"emoji emoji-1F4E4\"> <img class=\"emoji emoji-2709\"> <img class=\"emoji emoji-1F4E9\"> <img class=\"emoji emoji-1F4E8\">\r\n                                            <img class=\"emoji emoji-1F4EF\"> <img class=\"emoji emoji-1F4EB\"> <img class=\"emoji emoji-1F4EA\"> <img class=\"emoji emoji-1F4EC\"> <img class=\"emoji emoji-1F4ED\"> <img class=\"emoji emoji-1F4EE\"> <img class=\"emoji emoji-1F4E6\">\r\n                                            <img class=\"emoji emoji-1F4DD\"> <img class=\"emoji emoji-1F4C4\"> <img class=\"emoji emoji-1F4C3\"> <img class=\"emoji emoji-1F4D1\"> <img class=\"emoji emoji-1F4CA\"> <img class=\"emoji emoji-1F4C8\"> <img class=\"emoji emoji-1F4C9\">\r\n                                            <img class=\"emoji emoji-1F4DC\"> <img class=\"emoji emoji-1F4CB\"> <img class=\"emoji emoji-1F4C5\"> <img class=\"emoji emoji-1F4C6\"> <img class=\"emoji emoji-1F4C7\"> <img class=\"emoji emoji-1F4C1\"> <img class=\"emoji emoji-1F4C2\">\r\n                                            <img class=\"emoji emoji-2702\"> <img class=\"emoji emoji-1F4CC\"> <img class=\"emoji emoji-1F4CE\"> <img class=\"emoji emoji-2712\"> <img class=\"emoji emoji-270F\"> <img class=\"emoji emoji-1F4CF\"> <img class=\"emoji emoji-1F4D0\">\r\n                                            <img class=\"emoji emoji-1F4D5\"> <img class=\"emoji emoji-1F4D7\"> <img class=\"emoji emoji-1F4D8\"> <img class=\"emoji emoji-1F4D9\"> <img class=\"emoji emoji-1F4D3\"> <img class=\"emoji emoji-1F4D4\"> <img class=\"emoji emoji-1F4D2\">\r\n                                            <img class=\"emoji emoji-1F4DA\"> <img class=\"emoji emoji-1F4D6\"> <img class=\"emoji emoji-1F516\"> <img class=\"emoji emoji-1F4DB\"> <img class=\"emoji emoji-1F52C\"> <img class=\"emoji emoji-1F52D\"> <img class=\"emoji emoji-1F4F0\">\r\n                                            <img class=\"emoji emoji-1F3A8\"> <img class=\"emoji emoji-1F3AC\"> <img class=\"emoji emoji-1F3A4\"> <img class=\"emoji emoji-1F3A7\"> <img class=\"emoji emoji-1F3BC\"> <img class=\"emoji emoji-1F3B5\"> <img class=\"emoji emoji-1F3B6\">\r\n                                            <img class=\"emoji emoji-1F3B9\"> <img class=\"emoji emoji-1F3BB\"> <img class=\"emoji emoji-1F3BA\"> <img class=\"emoji emoji-1F3B7\"> <img class=\"emoji emoji-1F3B8\"> <img class=\"emoji emoji-1F47E\"> <img class=\"emoji emoji-1F3AE\">\r\n                                            <img class=\"emoji emoji-1F0CF\"> <img class=\"emoji emoji-1F3B4\"> <img class=\"emoji emoji-1F004\"> <img class=\"emoji emoji-1F3B2\"> <img class=\"emoji emoji-1F3AF\"> <img class=\"emoji emoji-1F3C8\"> <img class=\"emoji emoji-1F3C0\">\r\n                                            <img class=\"emoji emoji-26BD\"> <img class=\"emoji emoji-26BE\"> <img class=\"emoji emoji-1F3BE\"> <img class=\"emoji emoji-1F3B1\"> <img class=\"emoji emoji-1F3C9\"> <img class=\"emoji emoji-1F3B3\"> <img class=\"emoji emoji-26F3\">\r\n                                            <img class=\"emoji emoji-1F6B5\"> <img class=\"emoji emoji-1F6B4\"> <img class=\"emoji emoji-1F3C1\"> <img class=\"emoji emoji-1F3C7\"> <img class=\"emoji emoji-1F3C6\"> <img class=\"emoji emoji-1F3BF\"> <img class=\"emoji emoji-1F3C2\">\r\n                                            <img class=\"emoji emoji-1F3CA\"> <img class=\"emoji emoji-1F3C4\"> <img class=\"emoji emoji-1F3A3\"> <img class=\"emoji emoji-2615\"> <img class=\"emoji emoji-1F375\"> <img class=\"emoji emoji-1F376\"> <img class=\"emoji emoji-1F37C\">\r\n                                            <img class=\"emoji emoji-1F37A\"> <img class=\"emoji emoji-1F37B\"> <img class=\"emoji emoji-1F378\"> <img class=\"emoji emoji-1F379\"> <img class=\"emoji emoji-1F377\"> <img class=\"emoji emoji-1F374\"> <img class=\"emoji emoji-1F355\">\r\n                                            <img class=\"emoji emoji-1F354\"> <img class=\"emoji emoji-1F35F\"> <img class=\"emoji emoji-1F357\"> <img class=\"emoji emoji-1F356\"> <img class=\"emoji emoji-1F35D\"> <img class=\"emoji emoji-1F35B\"> <img class=\"emoji emoji-1F364\">\r\n                                            <img class=\"emoji emoji-1F371\"> <img class=\"emoji emoji-1F363\"> <img class=\"emoji emoji-1F365\"> <img class=\"emoji emoji-1F359\"> <img class=\"emoji emoji-1F358\"> <img class=\"emoji emoji-1F35A\"> <img class=\"emoji emoji-1F35C\">\r\n                                            <img class=\"emoji emoji-1F372\"> <img class=\"emoji emoji-1F362\"> <img class=\"emoji emoji-1F361\"> <img class=\"emoji emoji-1F373\"> <img class=\"emoji emoji-1F35E\"> <img class=\"emoji emoji-1F369\"> <img class=\"emoji emoji-1F36E\">\r\n                                            <img class=\"emoji emoji-1F366\"> <img class=\"emoji emoji-1F368\"> <img class=\"emoji emoji-1F367\"> <img class=\"emoji emoji-1F382\"> <img class=\"emoji emoji-1F370\"> <img class=\"emoji emoji-1F36A\"> <img class=\"emoji emoji-1F36B\">\r\n                                            <img class=\"emoji emoji-1F36C\"> <img class=\"emoji emoji-1F36D\"> <img class=\"emoji emoji-1F36F\"> <img class=\"emoji emoji-1F34E\"> <img class=\"emoji emoji-1F34F\"> <img class=\"emoji emoji-1F34A\"> <img class=\"emoji emoji-1F34B\">\r\n                                            <img class=\"emoji emoji-1F352\"> <img class=\"emoji emoji-1F347\"> <img class=\"emoji emoji-1F349\"> <img class=\"emoji emoji-1F353\"> <img class=\"emoji emoji-1F351\"> <img class=\"emoji emoji-1F348\"> <img class=\"emoji emoji-1F34C\">\r\n                                            <img class=\"emoji emoji-1F350\"> <img class=\"emoji emoji-1F34D\"> <img class=\"emoji emoji-1F360\"> <img class=\"emoji emoji-1F346\"> <img class=\"emoji emoji-1F345\"> <img class=\"emoji emoji-1F33D\">\r\n                                        </ul>\r\n                                    </li>\r\n\r\n                                    <li class=\"dropdown\">\r\n                                        <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\">Places</a>\r\n                                        <ul class=\"dropdown-menu\">\r\n                                            <img class=\"emoji emoji-1F3E0\"> <img class=\"emoji emoji-1F3E1\"> <img class=\"emoji emoji-1F3EB\"> <img class=\"emoji emoji-1F3E2\"> <img class=\"emoji emoji-1F3E3\"> <img class=\"emoji emoji-1F3E5\"> <img class=\"emoji emoji-1F3E6\">\r\n                                            <img class=\"emoji emoji-1F3EA\"> <img class=\"emoji emoji-1F3E9\"> <img class=\"emoji emoji-1F3E8\"> <img class=\"emoji emoji-1F492\"> <img class=\"emoji emoji-26EA\"> <img class=\"emoji emoji-1F3EC\"> <img class=\"emoji emoji-1F3E4\">\r\n                                            <img class=\"emoji emoji-1F307\"> <img class=\"emoji emoji-1F306\"> <img class=\"emoji emoji-1F3EF\"> <img class=\"emoji emoji-1F3F0\"> <img class=\"emoji emoji-26FA\"> <img class=\"emoji emoji-1F3ED\"> <img class=\"emoji emoji-1F5FC\">\r\n                                            <img class=\"emoji emoji-1F5FE\"> <img class=\"emoji emoji-1F5FB\"> <img class=\"emoji emoji-1F304\"> <img class=\"emoji emoji-1F305\"> <img class=\"emoji emoji-1F303\"> <img class=\"emoji emoji-1F5FD\"> <img class=\"emoji emoji-1F309\">\r\n                                            <img class=\"emoji emoji-1F3A0\"> <img class=\"emoji emoji-1F3A1\"> <img class=\"emoji emoji-26F2\"> <img class=\"emoji emoji-1F3A2\"> <img class=\"emoji emoji-1F6A2\"> <img class=\"emoji emoji-26F5\"> <img class=\"emoji emoji-1F6A4\">\r\n                                            <img class=\"emoji emoji-1F6A3\"> <img class=\"emoji emoji-2693\"> <img class=\"emoji emoji-1F680\"> <img class=\"emoji emoji-2708\"> <img class=\"emoji emoji-1F4BA\"> <img class=\"emoji emoji-1F681\"> <img class=\"emoji emoji-1F682\">\r\n                                            <img class=\"emoji emoji-1F68A\"> <img class=\"emoji emoji-1F689\"> <img class=\"emoji emoji-1F69E\"> <img class=\"emoji emoji-1F686\"> <img class=\"emoji emoji-1F684\"> <img class=\"emoji emoji-1F685\"> <img class=\"emoji emoji-1F688\">\r\n                                            <img class=\"emoji emoji-1F687\"> <img class=\"emoji emoji-1F69D\"> <img class=\"emoji emoji-1F68B\"> <img class=\"emoji emoji-1F683\"> <img class=\"emoji emoji-1F68E\"> <img class=\"emoji emoji-1F68C\"> <img class=\"emoji emoji-1F68D\">\r\n                                            <img class=\"emoji emoji-1F699\"> <img class=\"emoji emoji-1F698\"> <img class=\"emoji emoji-1F697\"> <img class=\"emoji emoji-1F695\"> <img class=\"emoji emoji-1F696\"> <img class=\"emoji emoji-1F69B\"> <img class=\"emoji emoji-1F69A\">\r\n                                            <img class=\"emoji emoji-1F6A8\"> <img class=\"emoji emoji-1F693\"> <img class=\"emoji emoji-1F694\"> <img class=\"emoji emoji-1F692\"> <img class=\"emoji emoji-1F691\"> <img class=\"emoji emoji-1F690\"> <img class=\"emoji emoji-1F6B2\">\r\n                                            <img class=\"emoji emoji-1F6A1\"> <img class=\"emoji emoji-1F69F\"> <img class=\"emoji emoji-1F6A0\"> <img class=\"emoji emoji-1F69C\"> <img class=\"emoji emoji-1F488\"> <img class=\"emoji emoji-1F68F\"> <img class=\"emoji emoji-1F3AB\">\r\n                                            <img class=\"emoji emoji-1F6A6\"> <img class=\"emoji emoji-1F6A5\"> <img class=\"emoji emoji-26A0\"> <img class=\"emoji emoji-1F6A7\"> <img class=\"emoji emoji-1F530\"> <img class=\"emoji emoji-26FD\"> <img class=\"emoji emoji-1F3EE\">\r\n                                            <img class=\"emoji emoji-1F3B0\"> <img class=\"emoji emoji-2668\"> <img class=\"emoji emoji-1F5FF\"> <img class=\"emoji emoji-1F3AA\"> <img class=\"emoji emoji-1F3AD\"> <img class=\"emoji emoji-1F4CD\"> <img class=\"emoji emoji-1F6A9\">\r\n                                            <img class=\"emoji emoji-1F1EF_1F1F5\"> <img class=\"emoji emoji-1F1F0_1F1F7\"> <img class=\"emoji emoji-1F1E9_1F1EA\"> <img class=\"emoji emoji-1F1E8_1F1F3\"> <img class=\"emoji emoji-1F1FA_1F1F8\"> <img class=\"emoji emoji-1F1EB_1F1F7\">\r\n                                            <img class=\"emoji emoji-1F1EA_1F1F8\"> <img class=\"emoji emoji-1F1EE_1F1F9\"> <img class=\"emoji emoji-1F1F7_1F1FA\"> <img class=\"emoji emoji-1F1EC_1F1E7\">\r\n                                        </ul>\r\n                                    </li>\r\n\r\n                                    <li class=\"dropdown\">\r\n                                        <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\">Symbols</a>\r\n                                        <ul class=\"dropdown-menu\">\r\n                                            <img class=\"emoji emoji-0031_20E3\"> <img class=\"emoji emoji-0032_20E3\"> <img class=\"emoji emoji-0033_20E3\"> <img class=\"emoji emoji-0034_20E3\"> <img class=\"emoji emoji-0035_20E3\"> <img class=\"emoji emoji-0036_20E3\"> <img class=\"emoji emoji-0037_20E3\">\r\n                                            <img class=\"emoji emoji-0038_20E3\"> <img class=\"emoji emoji-0039_20E3\"> <img class=\"emoji emoji-0030_20E3\"> <img class=\"emoji emoji-1F51F\"> <img class=\"emoji emoji-1F522\"> <img class=\"emoji emoji-0023_20E3\"> <img class=\"emoji emoji-1F523\">\r\n                                            <img class=\"emoji emoji-2B06\"> <img class=\"emoji emoji-2B07\"> <img class=\"emoji emoji-2B05\"> <img class=\"emoji emoji-27A1\"> <img class=\"emoji emoji-1F520\"> <img class=\"emoji emoji-1F521\"> <img class=\"emoji emoji-1F524\">\r\n                                            <img class=\"emoji emoji-2197\"> <img class=\"emoji emoji-2196\"> <img class=\"emoji emoji-2198\"> <img class=\"emoji emoji-2199\"> <img class=\"emoji emoji-2194\"> <img class=\"emoji emoji-2195\"> <img class=\"emoji emoji-1F504\">\r\n                                            <img class=\"emoji emoji-25C0\"> <img class=\"emoji emoji-25B6\"> <img class=\"emoji emoji-1F53C\"> <img class=\"emoji emoji-1F53D\"> <img class=\"emoji emoji-21A9\"> <img class=\"emoji emoji-21AA\"> <img class=\"emoji emoji-2139\">\r\n                                            <img class=\"emoji emoji-23EA\"> <img class=\"emoji emoji-23E9\"> <img class=\"emoji emoji-23EB\"> <img class=\"emoji emoji-23EC\"> <img class=\"emoji emoji-2935\"> <img class=\"emoji emoji-2934\"> <img class=\"emoji emoji-1F197\">\r\n                                            <img class=\"emoji emoji-1F500\"> <img class=\"emoji emoji-1F501\"> <img class=\"emoji emoji-1F502\"> <img class=\"emoji emoji-1F195\"> <img class=\"emoji emoji-1F199\"> <img class=\"emoji emoji-1F192\"> <img class=\"emoji emoji-1F193\">\r\n                                            <img class=\"emoji emoji-1F196\"> <img class=\"emoji emoji-1F4F6\"> <img class=\"emoji emoji-1F3A6\"> <img class=\"emoji emoji-1F201\"> <img class=\"emoji emoji-1F22F\"> <img class=\"emoji emoji-1F233\"> <img class=\"emoji emoji-1F235\">\r\n                                            <img class=\"emoji emoji-1F234\"> <img class=\"emoji emoji-1F232\"> <img class=\"emoji emoji-1F250\"> <img class=\"emoji emoji-1F239\"> <img class=\"emoji emoji-1F23A\"> <img class=\"emoji emoji-1F236\"> <img class=\"emoji emoji-1F21A\">\r\n                                            <img class=\"emoji emoji-1F6BB\"> <img class=\"emoji emoji-1F6B9\"> <img class=\"emoji emoji-1F6BA\"> <img class=\"emoji emoji-1F6BC\"> <img class=\"emoji emoji-1F6BE\"> <img class=\"emoji emoji-1F6B0\"> <img class=\"emoji emoji-1F6AE\">\r\n                                            <img class=\"emoji emoji-1F17F\"> <img class=\"emoji emoji-267F\"> <img class=\"emoji emoji-1F6AD\"> <img class=\"emoji emoji-1F237\"> <img class=\"emoji emoji-1F238\"> <img class=\"emoji emoji-1F202\"> <img class=\"emoji emoji-24C2\">\r\n                                            <img class=\"emoji emoji-1F6C2\"> <img class=\"emoji emoji-1F6C4\"> <img class=\"emoji emoji-1F6C5\"> <img class=\"emoji emoji-1F6C3\"> <img class=\"emoji emoji-1F251\"> <img class=\"emoji emoji-3299\"> <img class=\"emoji emoji-3297\">\r\n                                            <img class=\"emoji emoji-1F191\"> <img class=\"emoji emoji-1F198\"> <img class=\"emoji emoji-1F194\"> <img class=\"emoji emoji-1F6AB\"> <img class=\"emoji emoji-1F51E\"> <img class=\"emoji emoji-1F4F5\"> <img class=\"emoji emoji-1F6AF\">\r\n                                            <img class=\"emoji emoji-1F6B1\"> <img class=\"emoji emoji-1F6B3\"> <img class=\"emoji emoji-1F6B7\"> <img class=\"emoji emoji-1F6B8\"> <img class=\"emoji emoji-26D4\"> <img class=\"emoji emoji-2733\"> <img class=\"emoji emoji-2747\">\r\n                                            <img class=\"emoji emoji-274E\"> <img class=\"emoji emoji-2705\"> <img class=\"emoji emoji-2734\"> <img class=\"emoji emoji-1F49F\"> <img class=\"emoji emoji-1F19A\"> <img class=\"emoji emoji-1F4F3\"> <img class=\"emoji emoji-1F4F4\">\r\n                                            <img class=\"emoji emoji-1F170\"> <img class=\"emoji emoji-1F171\"> <img class=\"emoji emoji-1F18E\"> <img class=\"emoji emoji-1F17E\"> <img class=\"emoji emoji-1F4A0\"> <img class=\"emoji emoji-27BF\"> <img class=\"emoji emoji-267B\">\r\n                                            <img class=\"emoji emoji-2648\"> <img class=\"emoji emoji-2649\"> <img class=\"emoji emoji-264A\"> <img class=\"emoji emoji-264B\"> <img class=\"emoji emoji-264C\"> <img class=\"emoji emoji-264D\"> <img class=\"emoji emoji-264E\">\r\n                                            <img class=\"emoji emoji-264F\"> <img class=\"emoji emoji-2650\"> <img class=\"emoji emoji-2651\"> <img class=\"emoji emoji-2652\"> <img class=\"emoji emoji-2653\"> <img class=\"emoji emoji-26CE\"> <img class=\"emoji emoji-1F52F\">\r\n                                            <img class=\"emoji emoji-1F3E7\"> <img class=\"emoji emoji-1F4B9\"> <img class=\"emoji emoji-1F4B2\"> <img class=\"emoji emoji-1F4B1\"> <img class=\"emoji emoji-00A9\"> <img class=\"emoji emoji-00AE\"> <img class=\"emoji emoji-2122\">\r\n                                            <img class=\"emoji emoji-303D\"> <img class=\"emoji emoji-3030\"> <img class=\"emoji emoji-1F51D\"> <img class=\"emoji emoji-1F51A\"> <img class=\"emoji emoji-1F519\"> <img class=\"emoji emoji-1F51B\"> <img class=\"emoji emoji-1F51C\">\r\n                                            <img class=\"emoji emoji-274C\">  <img class=\"emoji emoji-2B55\"> <img class=\"emoji emoji-2757\"> <img class=\"emoji emoji-2753\"> <img class=\"emoji emoji-2755\"> <img class=\"emoji emoji-2754\"> <img class=\"emoji emoji-1F503\">\r\n                                            <img class=\"emoji emoji-1F55B\"> <img class=\"emoji emoji-1F567\"> <img class=\"emoji emoji-1F550\"> <img class=\"emoji emoji-1F55C\"> <img class=\"emoji emoji-1F551\"> <img class=\"emoji emoji-1F55D\"> <img class=\"emoji emoji-1F552\">\r\n                                            <img class=\"emoji emoji-1F55E\"> <img class=\"emoji emoji-1F553\"> <img class=\"emoji emoji-1F55F\"> <img class=\"emoji emoji-1F554\"> <img class=\"emoji emoji-1F560\"> <img class=\"emoji emoji-1F555\"> <img class=\"emoji emoji-1F556\">\r\n                                            <img class=\"emoji emoji-1F557\"> <img class=\"emoji emoji-1F558\"> <img class=\"emoji emoji-1F559\"> <img class=\"emoji emoji-1F55A\"> <img class=\"emoji emoji-1F561\"> <img class=\"emoji emoji-1F562\"> <img class=\"emoji emoji-1F563\">\r\n                                            <img class=\"emoji emoji-1F564\"> <img class=\"emoji emoji-1F565\"> <img class=\"emoji emoji-1F566\"> <img class=\"emoji emoji-2716\"> <img class=\"emoji emoji-2795\"> <img class=\"emoji emoji-2796\"> <img class=\"emoji emoji-2797\">\r\n                                            <img class=\"emoji emoji-2660\"> <img class=\"emoji emoji-2665\"> <img class=\"emoji emoji-2663\"> <img class=\"emoji emoji-2666\"> <img class=\"emoji emoji-1F4AE\"> <img class=\"emoji emoji-1F4AF\"> <img class=\"emoji emoji-2714\">\r\n                                            <img class=\"emoji emoji-2611\"> <img class=\"emoji emoji-1F518\"> <img class=\"emoji emoji-1F517\"> <img class=\"emoji emoji-27B0\"> <img class=\"emoji emoji-1F531\"> <img class=\"emoji emoji-1F532\"> <img class=\"emoji emoji-1F533\">\r\n                                            <img class=\"emoji emoji-25FC\"> <img class=\"emoji emoji-25FB\"> <img class=\"emoji emoji-25FE\"> <img class=\"emoji emoji-25FD\"> <img class=\"emoji emoji-25AA\"> <img class=\"emoji emoji-25AB\"> <img class=\"emoji emoji-1F53A\">\r\n                                            <img class=\"emoji emoji-2B1C\"> <img class=\"emoji emoji-2B1B\"> <img class=\"emoji emoji-26AB\"> <img class=\"emoji emoji-26AA\"> <img class=\"emoji emoji-1F534\"> <img class=\"emoji emoji-1F535\"> <img class=\"emoji emoji-1F53B\">\r\n                                            <img class=\"emoji emoji-1F536\"> <img class=\"emoji emoji-1F537\"> <img class=\"emoji emoji-1F538\"> <img class=\"emoji emoji-1F539\">\r\n                                            <img class=\"emoji emoji-2049\"> <img class=\"emoji emoji-203C\">\r\n                                        </ul>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <div class=\"control-group\">\r\n                                <label class=\"control-label\" for=\"faketextbox\">Msg</label>\r\n                                <div class=\"controls\">\r\n                                    <div contenteditable=\"true\" id=\"faketextbox\" name=\"faketextbox\"></div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"control-group\" style=\"display:none\">\r\n                                <label class=\"control-label\" for=\"status\">Status</label>\r\n                                <div class=\"controls\">\r\n                                    <div class=\"input-prepend\">\r\n                                        <span class=\"add-on\"><i class=\"icon-info-sign\"></i></span>\r\n                                        <input type=\"text\" id=\"status\" name=\"status\" placeholder=\"What's your status?\" disabled=\"disabled\" >\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"control-group\">\r\n                                <label class=\"control-label\" for=\"image\">Image</label>\r\n                                <div class=\"controls\">\r\n                                    <div class=\"input-prepend\">\r\n                                        <span class=\"add-on\"><i class=\"icon-picture\"></i></span>\r\n                                        <input type=\"text\" id=\"image\" name=\"image\" placeholder=\"Enter a URL...\">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"control-group\">\r\n                                <label class=\"control-label\" for=\"audio\">Audio</label>\r\n                                <div class=\"controls\">\r\n                                    <div class=\"input-prepend\">\r\n                                        <span class=\"add-on\"><i class=\"icon-music\"></i></span>\r\n                                        <input type=\"text\" id=\"audio\" name=\"audio\" placeholder=\"Enter a URL...\">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"control-group\">\r\n                                <label class=\"control-label\" for=\"video\">Video</label>\r\n                                <div class=\"controls\">\r\n                                    <div class=\"input-prepend\">\r\n                                        <span class=\"add-on\"><i class=\"icon-facetime-video\"></i></span>\r\n                                        <input type=\"text\" id=\"video\" name=\"video\" placeholder=\"Enter a URL...\">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"control-group\">\r\n                                <label class=\"control-label\" for=\"video\">Location</label>\r\n                                <div class=\"controls\">\r\n                                    <div class=\"input-prepend\">\r\n                                        <span class=\"add-on\"><i class=\"icon-globe\"></i></span>\r\n                                        <input type=\"text\" id=\"locationname\" name=\"locationname\" placeholder=\"Name of Location...\">\r\n                                        <div id='latlongcontainer'>\r\n                                            <span class=\"add-on\"><i class=\"icon-globe\"></i></span>\r\n                                            <input type=\"text\" id=\"userlat\" name=\"userlat\" placeholder=\"Latitude...\">\r\n                                            <input type=\"text\" id=\"userlong\" name=\"userlong\" placeholder=\"Longitude...\">\r\n                                            <button id='pickLocation' type='button' class='btn'><i class='icon-screenshot'></i></button>\r\n                                        </div>\r\n                                        <div id=\"mapContainer\">\r\n                                            <input id=\"target\" type=\"text\" placeholder=\"Type Address\">\r\n                                            <div id=\"map_canvas\"></div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"control-group\">\r\n                                <div class=\"controls\" id=\"formcontrols\">\r\n                                    <button id=\"submit\" type=\"submit\" class=\"btn btn-primary\">Send</button>\r\n                                    <button id=\"logout\" type=\"button\" class=\"btn btn-danger\">Log Out</button>\r\n                                </div>\r\n                            </div>\r\n                        </fieldset>\r\n                    </form>\r\n                </div> <!-- /container -->\r\n            </body>\r\n        </html>\r\n        <?php\r\n        return ob_get_clean();\r\n    }\r\n}",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1089/comments",
    "created_at": "2015-01-22T07:03:32Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7050293?v=3",
                "events_url": "https://api.github.com/users/return/events{/privacy}",
                "followers_url": "https://api.github.com/users/return/followers",
                "following_url": "https://api.github.com/users/return/following{/other_user}",
                "gists_url": "https://api.github.com/users/return/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/return",
                "id": 7050293,
                "login": "return",
                "organizations_url": "https://api.github.com/users/return/orgs",
                "received_events_url": "https://api.github.com/users/return/received_events",
                "repos_url": "https://api.github.com/users/return/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/return/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/return/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/return"
            },
            "commit_id": null,
            "created_at": "2015-01-22T07:03:33Z",
            "event": "mentioned",
            "id": 222839476,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/222839476"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7050293?v=3",
                "events_url": "https://api.github.com/users/return/events{/privacy}",
                "followers_url": "https://api.github.com/users/return/followers",
                "following_url": "https://api.github.com/users/return/following{/other_user}",
                "gists_url": "https://api.github.com/users/return/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/return",
                "id": 7050293,
                "login": "return",
                "organizations_url": "https://api.github.com/users/return/orgs",
                "received_events_url": "https://api.github.com/users/return/received_events",
                "repos_url": "https://api.github.com/users/return/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/return/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/return/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/return"
            },
            "commit_id": null,
            "created_at": "2015-01-22T07:03:33Z",
            "event": "subscribed",
            "id": 222839477,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/222839477"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2069912?v=3",
                "events_url": "https://api.github.com/users/throws/events{/privacy}",
                "followers_url": "https://api.github.com/users/throws/followers",
                "following_url": "https://api.github.com/users/throws/following{/other_user}",
                "gists_url": "https://api.github.com/users/throws/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/throws",
                "id": 2069912,
                "login": "throws",
                "organizations_url": "https://api.github.com/users/throws/orgs",
                "received_events_url": "https://api.github.com/users/throws/received_events",
                "repos_url": "https://api.github.com/users/throws/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/throws/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/throws/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/throws"
            },
            "commit_id": null,
            "created_at": "2015-01-22T07:03:33Z",
            "event": "mentioned",
            "id": 222839478,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/222839478"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2069912?v=3",
                "events_url": "https://api.github.com/users/throws/events{/privacy}",
                "followers_url": "https://api.github.com/users/throws/followers",
                "following_url": "https://api.github.com/users/throws/following{/other_user}",
                "gists_url": "https://api.github.com/users/throws/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/throws",
                "id": 2069912,
                "login": "throws",
                "organizations_url": "https://api.github.com/users/throws/orgs",
                "received_events_url": "https://api.github.com/users/throws/received_events",
                "repos_url": "https://api.github.com/users/throws/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/throws/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/throws/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/throws"
            },
            "commit_id": null,
            "created_at": "2015-01-22T07:03:33Z",
            "event": "subscribed",
            "id": 222839479,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/222839479"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/272241?v=3",
                "events_url": "https://api.github.com/users/Param/events{/privacy}",
                "followers_url": "https://api.github.com/users/Param/followers",
                "following_url": "https://api.github.com/users/Param/following{/other_user}",
                "gists_url": "https://api.github.com/users/Param/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Param",
                "id": 272241,
                "login": "Param",
                "organizations_url": "https://api.github.com/users/Param/orgs",
                "received_events_url": "https://api.github.com/users/Param/received_events",
                "repos_url": "https://api.github.com/users/Param/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Param/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Param/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Param"
            },
            "commit_id": null,
            "created_at": "2015-01-22T07:03:33Z",
            "event": "mentioned",
            "id": 222839480,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/222839480"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/272241?v=3",
                "events_url": "https://api.github.com/users/Param/events{/privacy}",
                "followers_url": "https://api.github.com/users/Param/followers",
                "following_url": "https://api.github.com/users/Param/following{/other_user}",
                "gists_url": "https://api.github.com/users/Param/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Param",
                "id": 272241,
                "login": "Param",
                "organizations_url": "https://api.github.com/users/Param/orgs",
                "received_events_url": "https://api.github.com/users/Param/received_events",
                "repos_url": "https://api.github.com/users/Param/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Param/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Param/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Param"
            },
            "commit_id": null,
            "created_at": "2015-01-22T07:03:33Z",
            "event": "subscribed",
            "id": 222839481,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/222839481"
        }
    ],
    "events_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1089/events",
    "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1089",
    "id": 55121234,
    "labels": [],
    "labels_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1089/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 1089,
    "state": "open",
    "title": "password invalid",
    "updated_at": "2015-01-22T07:06:03Z",
    "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1089",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/10649130?v=3",
        "events_url": "https://api.github.com/users/rinkypal/events{/privacy}",
        "followers_url": "https://api.github.com/users/rinkypal/followers",
        "following_url": "https://api.github.com/users/rinkypal/following{/other_user}",
        "gists_url": "https://api.github.com/users/rinkypal/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rinkypal",
        "id": 10649130,
        "login": "rinkypal",
        "organizations_url": "https://api.github.com/users/rinkypal/orgs",
        "received_events_url": "https://api.github.com/users/rinkypal/received_events",
        "repos_url": "https://api.github.com/users/rinkypal/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rinkypal/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rinkypal/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rinkypal"
    }
}