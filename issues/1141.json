{
    "assignee": null,
    "body": "Hello my friends, this occurring the following error when I try to send a message of type text, below:\r\n\r\n----\r\n\r\n    tx  <stream:features></stream:features>\r\n\r\n    tx  <auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-2\"      user=\"5591XXXXXXXX\">bNn\u001c559192278836\u0019Ù¸ƒ¤ð5q\u001bÕ†ß*ÂìŸÉ=\u0002  1430747177WhatsApp/2.11.432 Android/4.3 Device/GalaxyS3 MccMnc/724001</auth>\r\n\r\n    rx  <start from=\"s.whatsapp.net\"></start>\r\n\r\n    rx  <stream:features></stream:features>\r\n\r\n    rx  <challenge>SÄ¤\u001b ()\u001f‡%ç\u0007º/2'\u000ez5</challenge>\r\n\r\n    tx  <response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">ù«Á~æ#x\u0006¬:HÐ8Ðÿr°Á»Æ™ÉFk6ƒ™4Ö\u0013ÿXNIÍO</response>\r\n\r\n\r\n    Fatal error: Uncaught exception 'Exception' with message 'Login Failure' in C:\\www\\w3whatsapi \\whatsapi\\whatsprot.class.php:1507 Stack trace: #0 C:\\www\\w3whatsapi\\whatsapi\\whatsprot.class.php(427): WhatsProt->doLogin() #1 C:\\www\\w3whatsapi\\send.php(55): WhatsProt->loginWithPassword('3XqYThOT/96nx/n...') #2 {main} thrown in C:\\www\\w3whatsapi\\whatsapi\\whatsprot.class.php on line 1507\r\n\r\n------\r\nBelow the code in php sending:\r\n\r\n-------\r\n\r\n    <?php\r\n\r\n    require_once dirname(__FILE__) . '/util/MCrypt.php';\r\n\r\n    set_time_limit(10);\r\n    require_once 'whatsapi/whatsprot.class.php';\r\n\r\n    date_default_timezone_set('America/Belem');\r\n\r\n\r\n     $crypt = new MCrypt();\r\n\r\n     //variaveis para conexao whatsapp\r\n     $username = \"5591XXXXXXXX\";\r\n     $password = \"XXX\";\r\n     $identity = \"mentorid\";\r\n     $nickname = \"mentor\";    \r\n     $debug = true;\r\n\r\n      //realizando teste de conexao\r\n     if (isset($_GET[\"tipo\"]) && $_GET[\"tipo\"] == \"testconexao\") {\r\n        $w = new WhatsProt($username, $identity, $nickname, $debug);\r\n         try {\r\n            $w->connect();\r\n           echo \"OK\";\r\n          } catch (Exception $ex) {\r\n            echo \"ERRO\";\r\n         }\r\n         $w->disconnect();\r\n\r\n         return;\r\n          }\r\n\r\n         $tipo = $_GET[\"tipo\"];\r\n         $target = \"5591XXXXXXXX\";\r\n         $caminhoImagem = isset($_GET[\"caminho_imagem\"]) ? $_GET[\"caminho_imagem\"] : \"\";\r\n         $msg = isset($_GET[\"mensagem\"]) ? $_GET[\"mensagem\"] : \"\";\r\n         $caminhoVideo = isset($_GET[\"caminho_video\"]) ? $_GET[\"caminho_video\"] : \"\";\r\n         $MSG_FALHA_LOGIN = 500;\r\n         $MSG_ERRO_ENVIAR_MENSAGEM = 300;\r\n         $MSG_ERRO_NO_CODIGO = 800;\r\n         //Create the whatsapp object and setup a connection.\r\n         $w = new WhatsProt($username, $identity, $nickname, $debug);\r\n\r\n         /*try {*/\r\n         $w->connect();\r\n\r\n         $w->loginWithPassword($password);\r\n\r\n          if ($tipo == \"wtext\") {\r\n            $w->sendMessage($target, $msg);\r\n            echo \"1\";\r\n           } else if ($tipo == \"witext\") {\r\n              $w->sendMessageImage($target, $caminhoImagem);\r\n              $w->sendMessage($target, $msg);\r\n             echo \"1\";\r\n           } else if ($tipo == \"wvideo\") {\r\n\t\t$json = json_decode(urldecode($_GET[\"multi_mensagens_dupla\"]));\r\n\t\t$midias = $json->jsonMensagens;\r\n\t\t$w->sendMessage($target, $crypt->decrypt($midias[\"encrypt\"]));\r\n                $w->sendMessageVideo($target, $caminhoVideo);\r\n\t\t$w->sendMessage($target, $midias[\"nencrypt\"]);\r\n                echo \"1\";\r\n            }else if($tipo==\"wmvideo\"){\r\n\t\techo \"1\";\r\n            } else if ($tipo == \"wvtext\") {\r\n\r\n            $w->sendMessageVideo($target, $caminhoVideo);\r\n            $w->sendMessage($target, $msg);\r\n            echo \"1\";\r\n            } else if ($tipo == \"wimagem\" || $tipo == \"wmimagem\") {\r\n\t\t\r\n            $url = urldecode($caminhoImagem);\r\n\t    echo $url;\r\n           $w->sendMessageImage($target, $url);\r\n           //$w->waitForMessageReceipt();\r\n           echo \"1\";\r\n           } else if ($tipo == \"test\") {\r\n           $w->sendMessage($target, $msg);\r\n           echo \"1\";\r\n           }\r\n\r\n          while ($w->pollMessage());\r\n\r\n          ?> \r\n\r\nThanks in advance!!!\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "body": "guys could already solve was an error in the version of whatsapp. Version whatsapp. ",
            "created_at": "2015-05-04T15:26:38Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1141#issuecomment-98752575",
            "id": 98752575,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1141",
            "updated_at": "2015-05-04T15:26:38Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/98752575",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2867900?v=3",
                "events_url": "https://api.github.com/users/jacoboliveira/events{/privacy}",
                "followers_url": "https://api.github.com/users/jacoboliveira/followers",
                "following_url": "https://api.github.com/users/jacoboliveira/following{/other_user}",
                "gists_url": "https://api.github.com/users/jacoboliveira/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jacoboliveira",
                "id": 2867900,
                "login": "jacoboliveira",
                "organizations_url": "https://api.github.com/users/jacoboliveira/orgs",
                "received_events_url": "https://api.github.com/users/jacoboliveira/received_events",
                "repos_url": "https://api.github.com/users/jacoboliveira/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jacoboliveira/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jacoboliveira/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jacoboliveira"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1141/comments",
    "created_at": "2015-05-04T14:11:25Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1141/events",
    "html_url": "https://github.com/venomous0x/WhatsAPI/issues/1141",
    "id": 73030294,
    "labels": [],
    "labels_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1141/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 1141,
    "state": "open",
    "title": "Error when trying to send message: Login Failure",
    "updated_at": "2015-05-04T15:26:38Z",
    "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/1141",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2867900?v=3",
        "events_url": "https://api.github.com/users/jacoboliveira/events{/privacy}",
        "followers_url": "https://api.github.com/users/jacoboliveira/followers",
        "following_url": "https://api.github.com/users/jacoboliveira/following{/other_user}",
        "gists_url": "https://api.github.com/users/jacoboliveira/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jacoboliveira",
        "id": 2867900,
        "login": "jacoboliveira",
        "organizations_url": "https://api.github.com/users/jacoboliveira/orgs",
        "received_events_url": "https://api.github.com/users/jacoboliveira/received_events",
        "repos_url": "https://api.github.com/users/jacoboliveira/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jacoboliveira/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jacoboliveira/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jacoboliveira"
    }
}