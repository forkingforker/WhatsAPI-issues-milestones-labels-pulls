{
    "assignee": null,
    "body": "Hi Guys,\r\n\r\nat first let me thank you for this wonderful API.\r\nI have been playing around with it since a few days and I think, that it is a great pleasure to use it.\r\n\r\nIn my last few days I have had some trouble with frequent disconnects by the WhatsApp server after writing some test messages to myself (i.e. the number I am currently connected with) via WhatsAPI. I have increased my debugging output and think, that I have found something like a storm of message receipts.\r\n\r\nHere is a log of what I'm observing:\r\n\r\n\r\n```xml\r\ntx <stream:features>\r\ntx <receipt_acks></receipt_acks>\r\ntx </stream:features>\r\n\r\ntx <auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"**mynumber**\"></auth>\r\n\r\nrx <start from=\"s.whatsapp.net\"></start>\r\n\r\nrx <stream:features>\r\nrx <receipt_acks></receipt_acks>\r\nrx </stream:features>\r\n\r\nrx <challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">***stripped***</challenge>\r\n\r\ntx <response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">***stripped***</response>\r\n\r\nrx <success xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" kind=\"free\" status=\"active\" creation=\"***stripped***\" expiration=\"***stripped***\">***stripped***</success>\r\n\r\ntx <presence type=\"available\" name=\"**mynick**\"></presence>\r\n\r\nrx <presence from=\"s.whatsapp.net\" status=\"dirty\" xmlns=\"w\"></presence>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362165449-3\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362165449-3\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362160529-1\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362160529-1\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362161280-1\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362161280-1\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362162413-1\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362162413-1\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362073414-2\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362073414-2\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362163410-1\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362163410-1\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362164258-1\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362164258-1\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362160804-1\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362160804-1\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362165484-5\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362165484-5\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362073415-6\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362073415-6\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362157800-1\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362157800-1\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362156284-2\" type=\"chat\" t=\"1362322679\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362156284-2\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362160501-1\" type=\"chat\" t=\"1362322679\" retry=\"1\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362160501-1\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362097416-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362097416-1\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362163590-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362163590-1\" t=\"1362322692\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362164197-3\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362164197-3\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362073491-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362073491-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362161408-2\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362161408-2\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362164247-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362164247-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362164168-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362164168-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362163436-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362163436-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362157854-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362157854-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362165432-2\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362165432-2\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362164180-2\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362164180-2\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362164001-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362164001-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362082778-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362082778-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362123720-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362123720-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362163568-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362163568-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362163427-1\" type=\"chat\" t=\"1362322680\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362163427-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362161348-1\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362161348-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362164235-1\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362164235-1\" t=\"1362322693\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362073415-3\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362073415-3\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362073414-1\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362073414-1\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362130728-17\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362130728-17\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362163707-1\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362163707-1\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362156168-6\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362156168-6\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362096815-4\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362096815-4\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362073415-5\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362073415-5\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362097462-2\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362097462-2\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362156213-1\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362156213-1\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362164158-1\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362164158-1\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362073415-4\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362073415-4\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362164573-1\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362164573-1\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362107820-1\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362107820-1\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362165425-1\" type=\"chat\" t=\"1362322681\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362165425-1\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n\r\nrx <ib from=\"s.whatsapp.net\">\r\nrx <offline count=\"45\"></offline>\r\nrx </ib>\r\n\r\nrx <presence from=\"**mynumber**@s.whatsapp.net\" type=\"available\"></presence>\r\n\r\nrx <message from=\"**mynumber**@s.whatsapp.net\" id=\"1362165449-3\" type=\"chat\" t=\"1362322692\">\r\nrx <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx </message>\r\n\r\ntx <message to=\"**mynumber**@s.whatsapp.net\" type=\"chat\" id=\"1362165449-3\" t=\"1362322694\">\r\ntx <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx </message>\r\n```\r\n\r\n\r\n\r\n\r\nThe message ID numbers keep repeating itself after that, so that my client keeps sending message receipts to itself over and over all the time. After a short time i get disconnected by the whatsapp server, maybe due to some kind of flood protection.\r\n\r\nIs there any way we can break this loop of receipts been sent over and over?\r\n\r\nyowsup seems to acknowledge those messages as well, but if I see it correctly, it stops after having successfully acknowledged those messages once.\r\n\r\nIf you need more logs, just tell me. It would be nice if you have any advice for me.\r\n\r\nThanks for having a look on it!\r\n\r\nTheMattBan",
    "closed_at": "2013-06-19T10:10:07Z",
    "comment_data": [
        {
            "body": "Hi!\r\n\r\nJust in case anyone is interested, I seem to have found a workaround for me.\r\n\r\nIn whatsprot.class.php, protected function processInboundData($data) I have changed from\r\n\r\n```php\r\n$this->sendMessageReceived($node);\r\n```\r\n\r\nto\r\n```php\r\nif ((reset(explode('@',$node->_attributeHash['from']))==$this->_phoneNumber) && ($node->getChild('received') != NULL)){\t\t\t\r\n} else {\r\n    $this->sendMessageReceived($node);\r\n}\r\n```\r\n\r\nThis way my own messages won't be acknowledged anymore and the server sets it to read after some time.\r\nNow I still can send test messages to myself and still get a \r\n```xml\r\n    <ib from=\"s.whatsapp.net\">\r\n      <offline count=\"0\"></offline>\r\n    </ib>\r\n```\r\nafter logon.\r\n\r\nHTH\r\n\r\nTheMattBan",
            "created_at": "2013-03-03T22:37:02Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/293#issuecomment-14357181",
            "id": 14357181,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/293",
            "updated_at": "2013-03-03T22:45:38Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/14357181",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3757378?v=3",
                "events_url": "https://api.github.com/users/TheMattBan/events{/privacy}",
                "followers_url": "https://api.github.com/users/TheMattBan/followers",
                "following_url": "https://api.github.com/users/TheMattBan/following{/other_user}",
                "gists_url": "https://api.github.com/users/TheMattBan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TheMattBan",
                "id": 3757378,
                "login": "TheMattBan",
                "organizations_url": "https://api.github.com/users/TheMattBan/orgs",
                "received_events_url": "https://api.github.com/users/TheMattBan/received_events",
                "repos_url": "https://api.github.com/users/TheMattBan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TheMattBan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TheMattBan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/TheMattBan"
            }
        },
        {
            "body": "First: This did not stick to PHPs strict standards and was altered in shiriokos repo - see #371 \r\n\r\nThere is still a problem with this code: The API sends an receive-ack not only for messages but also for all other receive-acks. This does not happen only when you send messages to yourself (causing your loop) but also in \"normal\" chats:\r\n\r\n```xml\r\ntx  <message to=\"###123@s.whatsapp.net\" type=\"chat\" id=\"##713-2\" t=\"1371634713\">\r\ntx    <x xmlns=\"jabber:x:event\">\r\ntx      <server></server>\r\ntx    </x>\r\ntx    <notify xmlns=\"urn:xmpp:whatsapp\" name=\"###\"></notify>\r\ntx    <request xmlns=\"urn:xmpp:receipts\"></request>\r\ntx    <body>test</body>\r\ntx  </message>\r\n[...]\r\nrx  <message from=\"###123@s.whatsapp.net\" id=\"##713-2\" type=\"chat\" t=\"1371634719\">\r\nrx    <received xmlns=\"urn:xmpp:receipts\"></received>\r\nrx  </message>\r\ntx  <message to=\"###123@s.whatsapp.net\" type=\"chat\" id=\"##713-2\" t=\"1371634720\">\r\ntx    <received xmlns=\"urn:xmpp:receipts\"></received>\r\ntx  </message>\r\n```\r\n\r\nI dont think this is how these blocks are supposed to be used. So for the todo-list: Write a patch so we dont answer received-messages with received-messages.",
            "created_at": "2013-06-19T09:55:28Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/293#issuecomment-19673313",
            "id": 19673313,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/293",
            "updated_at": "2013-06-19T09:55:28Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/19673313",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1146482?v=3",
                "events_url": "https://api.github.com/users/adlerweb/events{/privacy}",
                "followers_url": "https://api.github.com/users/adlerweb/followers",
                "following_url": "https://api.github.com/users/adlerweb/following{/other_user}",
                "gists_url": "https://api.github.com/users/adlerweb/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/adlerweb",
                "id": 1146482,
                "login": "adlerweb",
                "organizations_url": "https://api.github.com/users/adlerweb/orgs",
                "received_events_url": "https://api.github.com/users/adlerweb/received_events",
                "repos_url": "https://api.github.com/users/adlerweb/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/adlerweb/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/adlerweb/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/adlerweb"
            }
        },
        {
            "body": "If I recall correctly I fixed this in my commit https://github.com/venomous0x/WhatsAPI/commit/194cd694ee5dfbf0fee8ed7abf3acbb7a201e296 by replacing the AND operator with the OR operator. This will prevent sending receipt for messages having a \"received\" child node.\r\n\r\nHere's the line I changed:\r\nhttps://github.com/venomous0x/WhatsAPI/commit/194cd694ee5dfbf0fee8ed7abf3acbb7a201e296#L0R354\r\n\r\nEDIT:\r\nI've pushed two months worth of commits last night, so you might want to re-download this ^_^",
            "created_at": "2013-06-19T10:00:53Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/293#issuecomment-19673550",
            "id": 19673550,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/293",
            "updated_at": "2013-06-19T10:17:35Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/19673550",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1610953?v=3",
                "events_url": "https://api.github.com/users/shirioko/events{/privacy}",
                "followers_url": "https://api.github.com/users/shirioko/followers",
                "following_url": "https://api.github.com/users/shirioko/following{/other_user}",
                "gists_url": "https://api.github.com/users/shirioko/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shirioko",
                "id": 1610953,
                "login": "shirioko",
                "organizations_url": "https://api.github.com/users/shirioko/orgs",
                "received_events_url": "https://api.github.com/users/shirioko/received_events",
                "repos_url": "https://api.github.com/users/shirioko/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shirioko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shirioko/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shirioko"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/293/comments",
    "created_at": "2013-03-03T18:22:43Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1610953?v=3",
                "events_url": "https://api.github.com/users/shirioko/events{/privacy}",
                "followers_url": "https://api.github.com/users/shirioko/followers",
                "following_url": "https://api.github.com/users/shirioko/following{/other_user}",
                "gists_url": "https://api.github.com/users/shirioko/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shirioko",
                "id": 1610953,
                "login": "shirioko",
                "organizations_url": "https://api.github.com/users/shirioko/orgs",
                "received_events_url": "https://api.github.com/users/shirioko/received_events",
                "repos_url": "https://api.github.com/users/shirioko/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shirioko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shirioko/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shirioko"
            },
            "commit_id": null,
            "created_at": "2013-06-19T10:10:07Z",
            "event": "closed",
            "id": 53235024,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/53235024"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/657357?v=3",
                "events_url": "https://api.github.com/users/asm89/events{/privacy}",
                "followers_url": "https://api.github.com/users/asm89/followers",
                "following_url": "https://api.github.com/users/asm89/following{/other_user}",
                "gists_url": "https://api.github.com/users/asm89/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asm89",
                "id": 657357,
                "login": "asm89",
                "organizations_url": "https://api.github.com/users/asm89/orgs",
                "received_events_url": "https://api.github.com/users/asm89/received_events",
                "repos_url": "https://api.github.com/users/asm89/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asm89/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asm89/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asm89"
            },
            "commit_id": "736b30490bd7b3d31be08998badee286a904773c",
            "created_at": "2014-01-06T22:52:02Z",
            "event": "referenced",
            "id": 84528157,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/84528157"
        }
    ],
    "events_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/293/events",
    "html_url": "https://github.com/venomous0x/WhatsAPI/issues/293",
    "id": 11595062,
    "labels": [],
    "labels_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/293/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 293,
    "state": "closed",
    "title": "message storm when writing to self",
    "updated_at": "2013-06-19T10:17:35Z",
    "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/293",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3757378?v=3",
        "events_url": "https://api.github.com/users/TheMattBan/events{/privacy}",
        "followers_url": "https://api.github.com/users/TheMattBan/followers",
        "following_url": "https://api.github.com/users/TheMattBan/following{/other_user}",
        "gists_url": "https://api.github.com/users/TheMattBan/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/TheMattBan",
        "id": 3757378,
        "login": "TheMattBan",
        "organizations_url": "https://api.github.com/users/TheMattBan/orgs",
        "received_events_url": "https://api.github.com/users/TheMattBan/received_events",
        "repos_url": "https://api.github.com/users/TheMattBan/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/TheMattBan/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/TheMattBan/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/TheMattBan"
    }
}