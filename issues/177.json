{
    "assignee": null,
    "body": "does not format good here, pastebin : http://www.privatepaste.com/1fb93434e7\n\naditya@ubuntu:~/code/wa/WhatsAPI/tests$ php whatsapp.php -s 91989236XXXX 'hi'\n[] Logging in as 'WhatsAPI Test' (91900427XXXX)\n\ntx  <stream:features>\ntx    <receipt_acks></receipt_acks>\ntx  </stream:features>\n\ntx  <auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"91900427XXXX\"></auth>\n\nrx  <start from=\"s.whatsapp.net\"></start>\n\nrx  <stream:features>\nrx    <receipt_acks></receipt_acks>\nrx  </stream:features>\n\nrx  <challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">{�g��\u001e\u0001 |Y�X�QȮW�|</challenge>\n\ntx  <response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">��P���t���jA�1�G~�������K\u0019�����\u0006;�b����_�|�n</response>\n\nrx  <success xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" status=\"active\" kind=\"free\" creation=\"1320056617\" expiration=\"1367144617\">�8?\u001fB\t0l\u0012)\u001c�r\u0018H\u001e<�ڵ</success>\n\n[] Request last seen 91989236XXXX: PHP Warning:  Missing argument 2 for WhatsProt::RequestLastSeen(), called in /WhatsAPI/tests/whatsapp.php on line 104 and defined in /WhatsAPI/src/php/whatsprot.class.php on line 345\nPHP Stack trace:\nPHP   1. {main}() /WhatsAPI/tests/whatsapp.php:0\nPHP   2. WhatsProt->RequestLastSeen() /WhatsAPI/tests/whatsapp.php:104\nPHP Notice:  Undefined variable: to in /WhatsAPI/src/php/whatsprot.class.php on line 355\nPHP Stack trace:\nPHP   1. {main}() /WhatsAPI/tests/whatsapp.php:0\nPHP   2. WhatsProt->RequestLastSeen() /WhatsAPI/tests/whatsapp.php:104\n\ntx  <iq to=\"@s.whatsapp.net\" type=\"get\" id=\"91989236XXXX\" from=\"91900427XXXX@s.whatsapp.net\">\ntx    <query xmlns=\"jabber:iq:last\"></query>\ntx  </iq>\n\n[] Send message to 91989236XXXX: hi \n\ntx  <message to=\"91989236XXXX@s.whatsapp.net\" type=\"chat\" id=\"1353407429-1\">\ntx    <x xmlns=\"jabber:x:event\">\ntx      <server></server>\ntx    </x>\ntx    <body>hi </body>\ntx  </message>\n",
    "closed_at": null,
    "comment_data": [
        {
            "body": "Comment out the Request Last Seen function call at line 109:\r\n\r\n$wa->RequestLastSeen($dst);\r\n\r\nor fix it by replacing it with:\r\n\r\n$wa->RequestLastSeen(time().\"-1\",\"$dst\");",
            "created_at": "2012-11-25T09:53:24Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/177#issuecomment-10691865",
            "id": 10691865,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/177",
            "updated_at": "2012-11-25T13:14:26Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/10691865",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2404568?v=3",
                "events_url": "https://api.github.com/users/shadzik/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadzik/followers",
                "following_url": "https://api.github.com/users/shadzik/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadzik/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadzik",
                "id": 2404568,
                "login": "shadzik",
                "organizations_url": "https://api.github.com/users/shadzik/orgs",
                "received_events_url": "https://api.github.com/users/shadzik/received_events",
                "repos_url": "https://api.github.com/users/shadzik/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadzik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadzik/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadzik"
            }
        },
        {
            "body": "that still not working for me :S",
            "created_at": "2012-12-06T19:26:13Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/177#issuecomment-11099848",
            "id": 11099848,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/177",
            "updated_at": "2012-12-06T19:26:13Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/11099848",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2982674?v=3",
                "events_url": "https://api.github.com/users/guidomgs/events{/privacy}",
                "followers_url": "https://api.github.com/users/guidomgs/followers",
                "following_url": "https://api.github.com/users/guidomgs/following{/other_user}",
                "gists_url": "https://api.github.com/users/guidomgs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/guidomgs",
                "id": 2982674,
                "login": "guidomgs",
                "organizations_url": "https://api.github.com/users/guidomgs/orgs",
                "received_events_url": "https://api.github.com/users/guidomgs/received_events",
                "repos_url": "https://api.github.com/users/guidomgs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/guidomgs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/guidomgs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/guidomgs"
            }
        },
        {
            "body": "Well, it truly works for me. Even using this API in a custom script like this one works:\r\n\r\n<?php\r\nrequire \"WhatsAPI/src/php/whatsprot.class.php\";\r\n\r\n$nickname = \"\";\r\n$sender = \t\"\"; // Mobile number with country code (but without + or 00)\r\n$imei = \t\"\"; // MAC Address for iOS, IMEI for other platform (Android/etc) \r\n\r\n$countrycode = substr($sender, 0, 2);\r\n$phonenumber=substr($sender, 2);\r\n\r\n$dst=$_SERVER['argv'][1];\r\n$user=$_SERVER['argv'][2];\r\n$msg = \"Hello $user\";\r\n\r\n$wa = new WhatsProt($sender, $imei, $nickname, false);\r\n$wa->Connect();\r\n$wa->Login();\r\n$wa->Message(time().\"-1\", $dst , $msg);\r\n?>\r\n\r\nAs you can see, I don't bother using RequestLastSeen(). Works like a charm.\r\nI guess it won't work when you register your device with WA 2.8.6 for iPhone. This version uses a different password generation algorithm than 2.8.4 and older. AFAIK 2.8.6 is not backwards compatible with older versions, so if you registered using this version, you won't be able to use WhatsAPI. I used an older device to register with 2.8.4 and since then am using this account with WhatsAPI.\r\n\r\nCheers.",
            "created_at": "2012-12-06T19:38:10Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/177#issuecomment-11100372",
            "id": 11100372,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/177",
            "updated_at": "2012-12-06T19:38:10Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/11100372",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2404568?v=3",
                "events_url": "https://api.github.com/users/shadzik/events{/privacy}",
                "followers_url": "https://api.github.com/users/shadzik/followers",
                "following_url": "https://api.github.com/users/shadzik/following{/other_user}",
                "gists_url": "https://api.github.com/users/shadzik/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shadzik",
                "id": 2404568,
                "login": "shadzik",
                "organizations_url": "https://api.github.com/users/shadzik/orgs",
                "received_events_url": "https://api.github.com/users/shadzik/received_events",
                "repos_url": "https://api.github.com/users/shadzik/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shadzik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shadzik/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shadzik"
            }
        },
        {
            "body": "if i use your code, the output is like this:\r\n\r\ntx  <message to=\"1354845605-1@s.whatsapp.net\" type=\"chat\" id=\"1354845605-1\" t=\"1354845605\">\r\ntx    <x xmlns=\"jabber:x:event\">\r\ntx      <server></server>\r\ntx    </x>\r\ntx    <notify xmlns=\"urn:xmpp:whatsapp\" name=\"w\"></notify>\r\ntx    <request xmlns=\"urn:xmpp:receipts\"></request>\r\ntx    <body>549XXXXXX</body>\r\ntx  </message>\r\n\r\nwhere the fist line instead using the number is using the message id\r\n",
            "created_at": "2012-12-07T02:01:39Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/177#issuecomment-11115276",
            "id": 11115276,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/177",
            "updated_at": "2012-12-07T02:01:39Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/11115276",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2982674?v=3",
                "events_url": "https://api.github.com/users/guidomgs/events{/privacy}",
                "followers_url": "https://api.github.com/users/guidomgs/followers",
                "following_url": "https://api.github.com/users/guidomgs/following{/other_user}",
                "gists_url": "https://api.github.com/users/guidomgs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/guidomgs",
                "id": 2982674,
                "login": "guidomgs",
                "organizations_url": "https://api.github.com/users/guidomgs/orgs",
                "received_events_url": "https://api.github.com/users/guidomgs/received_events",
                "repos_url": "https://api.github.com/users/guidomgs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/guidomgs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/guidomgs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/guidomgs"
            }
        },
        {
            "body": "message to=\"1354845605-1@s.whatsapp.net\" type=\"chat\" id=\"1354845605-1\" t=\"1354845605\"",
            "created_at": "2012-12-07T02:02:07Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/177#issuecomment-11115287",
            "id": 11115287,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/177",
            "updated_at": "2012-12-07T02:02:07Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/11115287",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2982674?v=3",
                "events_url": "https://api.github.com/users/guidomgs/events{/privacy}",
                "followers_url": "https://api.github.com/users/guidomgs/followers",
                "following_url": "https://api.github.com/users/guidomgs/following{/other_user}",
                "gists_url": "https://api.github.com/users/guidomgs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/guidomgs",
                "id": 2982674,
                "login": "guidomgs",
                "organizations_url": "https://api.github.com/users/guidomgs/orgs",
                "received_events_url": "https://api.github.com/users/guidomgs/received_events",
                "repos_url": "https://api.github.com/users/guidomgs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/guidomgs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/guidomgs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/guidomgs"
            }
        },
        {
            "body": "fixed! \r\nafter the sendmessage function call is good to add sleep(1); to let the script send the message",
            "created_at": "2012-12-07T14:35:17Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/177#issuecomment-11131773",
            "id": 11131773,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/177",
            "updated_at": "2012-12-07T14:35:17Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/11131773",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2982674?v=3",
                "events_url": "https://api.github.com/users/guidomgs/events{/privacy}",
                "followers_url": "https://api.github.com/users/guidomgs/followers",
                "following_url": "https://api.github.com/users/guidomgs/following{/other_user}",
                "gists_url": "https://api.github.com/users/guidomgs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/guidomgs",
                "id": 2982674,
                "login": "guidomgs",
                "organizations_url": "https://api.github.com/users/guidomgs/orgs",
                "received_events_url": "https://api.github.com/users/guidomgs/received_events",
                "repos_url": "https://api.github.com/users/guidomgs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/guidomgs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/guidomgs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/guidomgs"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/177/comments",
    "created_at": "2012-11-20T10:34:26Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/177/events",
    "html_url": "https://github.com/venomous0x/WhatsAPI/issues/177",
    "id": 8499572,
    "labels": [],
    "labels_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/177/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 177,
    "state": "open",
    "title": "tests/whatsapp.php Send message does not work but interactive works!",
    "updated_at": "2012-12-07T14:35:17Z",
    "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/177",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/311955?v=3",
        "events_url": "https://api.github.com/users/xxxazxxx/events{/privacy}",
        "followers_url": "https://api.github.com/users/xxxazxxx/followers",
        "following_url": "https://api.github.com/users/xxxazxxx/following{/other_user}",
        "gists_url": "https://api.github.com/users/xxxazxxx/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/xxxazxxx",
        "id": 311955,
        "login": "xxxazxxx",
        "organizations_url": "https://api.github.com/users/xxxazxxx/orgs",
        "received_events_url": "https://api.github.com/users/xxxazxxx/received_events",
        "repos_url": "https://api.github.com/users/xxxazxxx/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/xxxazxxx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/xxxazxxx/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/xxxazxxx"
    }
}