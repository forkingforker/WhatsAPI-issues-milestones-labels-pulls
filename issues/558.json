{
    "assignee": null,
    "body": "\r\nHi All,\r\nI am trying to send a message using the below code : \r\n\r\nrequire '../src/php/whatsprot.class.php';\r\n\r\n$destinationPhone = '1147852369';\r\n\r\n$nickname = \"Altaf Hussain\";\r\n$sender = \t\"123456799\"; // Mobile number with country code (but without + or 00)\r\n$imei = \t\"my phone imei on which i am using the sender number\"; // MAC Address for iOS IMEI for other platform (Android/etc)\r\n$password =     \"password i fetched from whatsapp server using WART\"; // Password you received from WhatsApp\r\n\r\n$w = new WhatsProt($sender, $imei, $nickname, false);\r\n$w->Connect();\r\n$w->LoginWithPassword($password);\r\n\r\n//$w->SendPresenceSubscription($destinationPhone);\r\n\r\necho $w->sendMessage($destinationPhone, \"tthis is a test dude, hope you will get this msg :) \");\r\n\r\nThe destination number is also in my contacts list. But when i run this script, i got the following message : \r\n\r\n  message-1387714712-1\r\n\r\nAnd the message is not delivered to the destination number.  \r\nAbout the identity field i was too confused, in some of the provided examples they used 0, so i used 0 also instead my phone imei (android phone) and response was the same. \r\n\r\nAfter enabling debugging i got an xml message. Please check the attached image.\r\n\r\n![issue](https://f.cloud.github.com/assets/4163772/1797766/b68b39b8-6b0d-11e3-882b-87f2414fd41f.jpg)\r\n\r\n\r\nI am not sure if i have an error or i am doing something wrong. If some body can help me and give me details what is the problem in code, i will be very thankful. \r\n\r\nThank you",
    "closed_at": null,
    "comment_data": [
        {
            "body": "Ok now i tried with IPhone and a different number and everything is working fine.",
            "created_at": "2013-12-23T07:40:28Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/558#issuecomment-31107457",
            "id": 31107457,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558",
            "updated_at": "2013-12-23T07:40:28Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/31107457",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4163772?v=3",
                "events_url": "https://api.github.com/users/altafhussain10/events{/privacy}",
                "followers_url": "https://api.github.com/users/altafhussain10/followers",
                "following_url": "https://api.github.com/users/altafhussain10/following{/other_user}",
                "gists_url": "https://api.github.com/users/altafhussain10/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/altafhussain10",
                "id": 4163772,
                "login": "altafhussain10",
                "organizations_url": "https://api.github.com/users/altafhussain10/orgs",
                "received_events_url": "https://api.github.com/users/altafhussain10/received_events",
                "repos_url": "https://api.github.com/users/altafhussain10/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/altafhussain10/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/altafhussain10/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/altafhussain10"
            }
        },
        {
            "body": "Did you register WhatsApp on your Android phone after using WART? WhatsApp only allows a number to be registered to a single device at a time.",
            "created_at": "2013-12-23T11:26:00Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/558#issuecomment-31114376",
            "id": 31114376,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558",
            "updated_at": "2013-12-23T11:26:00Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/31114376",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1610953?v=3",
                "events_url": "https://api.github.com/users/shirioko/events{/privacy}",
                "followers_url": "https://api.github.com/users/shirioko/followers",
                "following_url": "https://api.github.com/users/shirioko/following{/other_user}",
                "gists_url": "https://api.github.com/users/shirioko/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shirioko",
                "id": 1610953,
                "login": "shirioko",
                "organizations_url": "https://api.github.com/users/shirioko/orgs",
                "received_events_url": "https://api.github.com/users/shirioko/received_events",
                "repos_url": "https://api.github.com/users/shirioko/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shirioko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shirioko/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shirioko"
            }
        },
        {
            "body": "The issue i was having with my number. After that i tried with another number on IPhone and it is working fine now. Also i discovered the number should be used only on a single place? either phone or by whatsapi. At the moment i am trying to sync contacts. If you can answer my question: \r\n\r\nI have a contact which are not added to my phone and hence whatsapp. As whatsapp allows messages only to contacts on your phone, then how i can send messages to that number which is not on phone contact list? I tried to use the contactsync.php, and it shows me the status of that number which can tell us that the number is using whatsapp, but when i send a message to that number, it is not delivered. If you can help me out that is it possible to add new numbers which are not on my contact list yet, so i can send messages to them? \r\n\r\nThank you for your response. ",
            "created_at": "2013-12-23T11:34:42Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/558#issuecomment-31114688",
            "id": 31114688,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558",
            "updated_at": "2013-12-23T11:34:42Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/31114688",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4163772?v=3",
                "events_url": "https://api.github.com/users/altafhussain10/events{/privacy}",
                "followers_url": "https://api.github.com/users/altafhussain10/followers",
                "following_url": "https://api.github.com/users/altafhussain10/following{/other_user}",
                "gists_url": "https://api.github.com/users/altafhussain10/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/altafhussain10",
                "id": 4163772,
                "login": "altafhussain10",
                "organizations_url": "https://api.github.com/users/altafhussain10/orgs",
                "received_events_url": "https://api.github.com/users/altafhussain10/received_events",
                "repos_url": "https://api.github.com/users/altafhussain10/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/altafhussain10/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/altafhussain10/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/altafhussain10"
            }
        },
        {
            "body": "Are you using international format for your numbers (incl. country code)?\r\n\r\nCan you post the code you are using to send a message to any contact?\r\nI you are using message broadcast the message will not be delivered unless the contact has YOUR number in HIS contact list :)",
            "created_at": "2013-12-23T11:46:20Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/558#issuecomment-31115116",
            "id": 31115116,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558",
            "updated_at": "2013-12-23T11:46:20Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/31115116",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1610953?v=3",
                "events_url": "https://api.github.com/users/shirioko/events{/privacy}",
                "followers_url": "https://api.github.com/users/shirioko/followers",
                "following_url": "https://api.github.com/users/shirioko/following{/other_user}",
                "gists_url": "https://api.github.com/users/shirioko/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shirioko",
                "id": 1610953,
                "login": "shirioko",
                "organizations_url": "https://api.github.com/users/shirioko/orgs",
                "received_events_url": "https://api.github.com/users/shirioko/received_events",
                "repos_url": "https://api.github.com/users/shirioko/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shirioko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shirioko/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shirioko"
            }
        },
        {
            "body": "Yes i am using international number format attaching country code without 00 or +. \r\n\r\nBelow is the code.\r\n\r\ndestinationPhone = array('123123123@s.whatsapp.net', '147854@s.whatsapp.net');\r\n\r\n$nickname = \"Altaf Hussain\";\r\n$sender = \t\"987654\"; // Mobile number with country code (but without + or 00)\r\n$imei = \t\"imei\"; // MAC Address for iOS IMEI for other platform (Android/etc)\r\n$password =     \"password i fetched using WART\"; // Password you received from WhatsApp\r\n\r\n$w = new WhatsProt($sender, $imei, $nickname, true);\r\n$w->Connect();\r\n$w->LoginWithPassword($password);\r\n\r\n$w->sendBroadcastMessage($destinationPhone, \"This is a test broadcast message\");\r\n\r\nYes i am using broadcast messaging. Yes my number may be not in his/her contact list :P , then is there any possibility ? Is it possible to send individual message using sendMessage in my case ?\r\n\r\nThanks ",
            "created_at": "2013-12-23T11:53:01Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/558#issuecomment-31115333",
            "id": 31115333,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558",
            "updated_at": "2013-12-23T11:53:21Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/31115333",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4163772?v=3",
                "events_url": "https://api.github.com/users/altafhussain10/events{/privacy}",
                "followers_url": "https://api.github.com/users/altafhussain10/followers",
                "following_url": "https://api.github.com/users/altafhussain10/following{/other_user}",
                "gists_url": "https://api.github.com/users/altafhussain10/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/altafhussain10",
                "id": 4163772,
                "login": "altafhussain10",
                "organizations_url": "https://api.github.com/users/altafhussain10/orgs",
                "received_events_url": "https://api.github.com/users/altafhussain10/received_events",
                "repos_url": "https://api.github.com/users/altafhussain10/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/altafhussain10/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/altafhussain10/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/altafhussain10"
            }
        },
        {
            "body": "Yes you can send messages using sendMessage(), though this only allows you to send one message to one contact at a time.",
            "created_at": "2013-12-23T12:11:49Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/558#issuecomment-31116053",
            "id": 31116053,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558",
            "updated_at": "2013-12-23T12:11:49Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/31116053",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1610953?v=3",
                "events_url": "https://api.github.com/users/shirioko/events{/privacy}",
                "followers_url": "https://api.github.com/users/shirioko/followers",
                "following_url": "https://api.github.com/users/shirioko/following{/other_user}",
                "gists_url": "https://api.github.com/users/shirioko/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/shirioko",
                "id": 1610953,
                "login": "shirioko",
                "organizations_url": "https://api.github.com/users/shirioko/orgs",
                "received_events_url": "https://api.github.com/users/shirioko/received_events",
                "repos_url": "https://api.github.com/users/shirioko/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/shirioko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shirioko/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/shirioko"
            }
        },
        {
            "body": "Thank you for your quick responses. I will try with sendMessage. \r\n",
            "created_at": "2013-12-23T12:13:05Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/558#issuecomment-31116099",
            "id": 31116099,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558",
            "updated_at": "2013-12-23T12:13:05Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/31116099",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4163772?v=3",
                "events_url": "https://api.github.com/users/altafhussain10/events{/privacy}",
                "followers_url": "https://api.github.com/users/altafhussain10/followers",
                "following_url": "https://api.github.com/users/altafhussain10/following{/other_user}",
                "gists_url": "https://api.github.com/users/altafhussain10/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/altafhussain10",
                "id": 4163772,
                "login": "altafhussain10",
                "organizations_url": "https://api.github.com/users/altafhussain10/orgs",
                "received_events_url": "https://api.github.com/users/altafhussain10/received_events",
                "repos_url": "https://api.github.com/users/altafhussain10/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/altafhussain10/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/altafhussain10/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/altafhussain10"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558/comments",
    "created_at": "2013-12-22T13:26:18Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558/events",
    "html_url": "https://github.com/venomous0x/WhatsAPI/issues/558",
    "id": 24681152,
    "labels": [],
    "labels_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 558,
    "state": "open",
    "title": "Message not sent",
    "updated_at": "2013-12-23T12:13:05Z",
    "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/558",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4163772?v=3",
        "events_url": "https://api.github.com/users/altafhussain10/events{/privacy}",
        "followers_url": "https://api.github.com/users/altafhussain10/followers",
        "following_url": "https://api.github.com/users/altafhussain10/following{/other_user}",
        "gists_url": "https://api.github.com/users/altafhussain10/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/altafhussain10",
        "id": 4163772,
        "login": "altafhussain10",
        "organizations_url": "https://api.github.com/users/altafhussain10/orgs",
        "received_events_url": "https://api.github.com/users/altafhussain10/received_events",
        "repos_url": "https://api.github.com/users/altafhussain10/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/altafhussain10/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/altafhussain10/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/altafhussain10"
    }
}