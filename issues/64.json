{
    "assignee": null,
    "body": "My idea is to use this script to answer questions in a group chat. The problem is that after a while and when there are no messages in the group the scripts keeps running, but doesn't receive anything. Possible solutions:\n\n- send a ping like message to the Whatsapp server every 60 seconds and check for a response -> no response is rebuild connection\n- do some kind of other check on the socket to see if the other end is still listening -> no response is rebuild connection\n- start the script every minute and leave it running for 59 seconds (don't think this is a good idea because it logs on every minute)\n\nOther ideas/suggestions?\n",
    "closed_at": "2012-09-16T18:35:20Z",
    "comment_data": [
        {
            "body": "Sending \"heartbeat\" packet would be ideal I guess...",
            "created_at": "2012-09-16T15:09:57Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/64#issuecomment-8595537",
            "id": 8595537,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/64",
            "updated_at": "2012-09-16T15:09:57Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/8595537",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17515?v=3",
                "events_url": "https://api.github.com/users/hubail/events{/privacy}",
                "followers_url": "https://api.github.com/users/hubail/followers",
                "following_url": "https://api.github.com/users/hubail/following{/other_user}",
                "gists_url": "https://api.github.com/users/hubail/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/hubail",
                "id": 17515,
                "login": "hubail",
                "organizations_url": "https://api.github.com/users/hubail/orgs",
                "received_events_url": "https://api.github.com/users/hubail/received_events",
                "repos_url": "https://api.github.com/users/hubail/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/hubail/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hubail/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/hubail"
            }
        },
        {
            "body": "Tried to send a xmpp ping to the server (http://xmpp.org/extensions/xep-0199.html#c2s), but that feature is not implemented (it can still be used however to check the connection). \n\n`<iq from=\"xxxxxxxxxx@s.whatsapp.net\" to=\"s.whatsapp.net\" id=\"1347809994-1\" type=\"get\">\n<ping xmlns=\"urn:xmpp:ping\"></ping>\n</iq>\n`\nresponse:\n`<iq from=\"s.whatsapp.net\" id=\"1347809994-1\" type=\"error\">\n<error code=\"501\" type=\"cancel\">\n<feature-not-implemented xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"></feature-not-implemented>\n</error>\n</iq>\n`\n\nHowever I see incoming ping requests from the server:\n`<iq from=\"s.whatsapp.net\" id=\"1347810416-ping\" type=\"get\">\n\t<ping xmlns=\"urn:xmpp:ping\"></ping>\n</iq>`\n\nSending back a response is working:\n\n`<iq to=\"s.whatsapp.net\" id=\"1347810416-ping\" type=\"result\"></iq>`\n\nThe connection stays open. I think this is the way to go, so I'll prepare a pull request.",
            "created_at": "2012-09-16T16:33:55Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/64#issuecomment-8596289",
            "id": 8596289,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/64",
            "updated_at": "2012-09-16T16:33:55Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/8596289",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2151026?v=3",
                "events_url": "https://api.github.com/users/arthursc/events{/privacy}",
                "followers_url": "https://api.github.com/users/arthursc/followers",
                "following_url": "https://api.github.com/users/arthursc/following{/other_user}",
                "gists_url": "https://api.github.com/users/arthursc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/arthursc",
                "id": 2151026,
                "login": "arthursc",
                "organizations_url": "https://api.github.com/users/arthursc/orgs",
                "received_events_url": "https://api.github.com/users/arthursc/received_events",
                "repos_url": "https://api.github.com/users/arthursc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/arthursc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/arthursc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/arthursc"
            }
        },
        {
            "body": "See pull pull/66",
            "created_at": "2012-09-16T18:35:20Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/64#issuecomment-8597482",
            "id": 8597482,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/64",
            "updated_at": "2012-09-16T18:35:20Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/8597482",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2151026?v=3",
                "events_url": "https://api.github.com/users/arthursc/events{/privacy}",
                "followers_url": "https://api.github.com/users/arthursc/followers",
                "following_url": "https://api.github.com/users/arthursc/following{/other_user}",
                "gists_url": "https://api.github.com/users/arthursc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/arthursc",
                "id": 2151026,
                "login": "arthursc",
                "organizations_url": "https://api.github.com/users/arthursc/orgs",
                "received_events_url": "https://api.github.com/users/arthursc/received_events",
                "repos_url": "https://api.github.com/users/arthursc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/arthursc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/arthursc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/arthursc"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/64/comments",
    "created_at": "2012-09-16T15:03:40Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2151026?v=3",
                "events_url": "https://api.github.com/users/arthursc/events{/privacy}",
                "followers_url": "https://api.github.com/users/arthursc/followers",
                "following_url": "https://api.github.com/users/arthursc/following{/other_user}",
                "gists_url": "https://api.github.com/users/arthursc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/arthursc",
                "id": 2151026,
                "login": "arthursc",
                "organizations_url": "https://api.github.com/users/arthursc/orgs",
                "received_events_url": "https://api.github.com/users/arthursc/received_events",
                "repos_url": "https://api.github.com/users/arthursc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/arthursc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/arthursc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/arthursc"
            },
            "commit_id": null,
            "created_at": "2012-09-16T18:35:20Z",
            "event": "closed",
            "id": 24722229,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/24722229"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17515?v=3",
                "events_url": "https://api.github.com/users/hubail/events{/privacy}",
                "followers_url": "https://api.github.com/users/hubail/followers",
                "following_url": "https://api.github.com/users/hubail/following{/other_user}",
                "gists_url": "https://api.github.com/users/hubail/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/hubail",
                "id": 17515,
                "login": "hubail",
                "organizations_url": "https://api.github.com/users/hubail/orgs",
                "received_events_url": "https://api.github.com/users/hubail/received_events",
                "repos_url": "https://api.github.com/users/hubail/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/hubail/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hubail/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/hubail"
            },
            "commit_id": "526e38ea6d22281bea162c40c95a57a0fd738ff4",
            "created_at": "2012-09-17T05:40:25Z",
            "event": "referenced",
            "id": 24736109,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/24736109"
        }
    ],
    "events_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/64/events",
    "html_url": "https://github.com/venomous0x/WhatsAPI/issues/64",
    "id": 6903564,
    "labels": [],
    "labels_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/64/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 64,
    "state": "closed",
    "title": "What's the best way to keep the connection open/receive messages",
    "updated_at": "2012-09-16T18:35:20Z",
    "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/64",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2151026?v=3",
        "events_url": "https://api.github.com/users/arthursc/events{/privacy}",
        "followers_url": "https://api.github.com/users/arthursc/followers",
        "following_url": "https://api.github.com/users/arthursc/following{/other_user}",
        "gists_url": "https://api.github.com/users/arthursc/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/arthursc",
        "id": 2151026,
        "login": "arthursc",
        "organizations_url": "https://api.github.com/users/arthursc/orgs",
        "received_events_url": "https://api.github.com/users/arthursc/received_events",
        "repos_url": "https://api.github.com/users/arthursc/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/arthursc/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/arthursc/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/arthursc"
    }
}