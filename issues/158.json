{
    "assignee": null,
    "body": "According to http://lowlevel-studios.com/whatsapp-protocol-1-2-a-brief-explanation, \r\nlines 118 and 119 from protocol.class.php are wrong. They miss the last 4 bits of size from the first byte.",
    "closed_at": null,
    "comment_data": [
        {
            "body": "you fix them ? ",
            "created_at": "2012-11-11T00:52:55Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/158#issuecomment-10261924",
            "id": 10261924,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158",
            "updated_at": "2012-11-11T00:52:55Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/10261924",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2338289?v=3",
                "events_url": "https://api.github.com/users/khillobaz/events{/privacy}",
                "followers_url": "https://api.github.com/users/khillobaz/followers",
                "following_url": "https://api.github.com/users/khillobaz/following{/other_user}",
                "gists_url": "https://api.github.com/users/khillobaz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/khillobaz",
                "id": 2338289,
                "login": "khillobaz",
                "organizations_url": "https://api.github.com/users/khillobaz/orgs",
                "received_events_url": "https://api.github.com/users/khillobaz/received_events",
                "repos_url": "https://api.github.com/users/khillobaz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/khillobaz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/khillobaz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/khillobaz"
            }
        },
        {
            "body": "Moreover, in the lines 438 and 439 when flush the buffer if the data is encrypted saves it in the 4 bit of the first byte:\r\n        $ret = $this->writeInt8(isset($this->_key) ? (1 << 4) : 0);\r\n        $ret .= $this->writeInt16($size);\r\nSaves: (00000001) << 4 = 00010000 when according to the link must be 10000000\r\nAnd the size is saved in 2 bytes and don't modify the last 4 bits of the first byte.\r\nThe code must be something like this:\r\n        $ret = $this->writeInt24(((isset($this->_key) ? (0x80) : 0) << 20) | $size);",
            "created_at": "2012-11-11T11:23:10Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/158#issuecomment-10265341",
            "id": 10265341,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158",
            "updated_at": "2012-11-11T11:23:10Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/10265341",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/398668?v=3",
                "events_url": "https://api.github.com/users/ElJava/events{/privacy}",
                "followers_url": "https://api.github.com/users/ElJava/followers",
                "following_url": "https://api.github.com/users/ElJava/following{/other_user}",
                "gists_url": "https://api.github.com/users/ElJava/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ElJava",
                "id": 398668,
                "login": "ElJava",
                "organizations_url": "https://api.github.com/users/ElJava/orgs",
                "received_events_url": "https://api.github.com/users/ElJava/received_events",
                "repos_url": "https://api.github.com/users/ElJava/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ElJava/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ElJava/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ElJava"
            }
        },
        {
            "body": "@lilezek @ElJava \r\n\r\nhi.. can explain what needs to be done? I cant receive messages. thanks!\r\n\r\nJJ",
            "created_at": "2012-11-13T17:41:59Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/158#issuecomment-10335283",
            "id": 10335283,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158",
            "updated_at": "2012-11-13T17:41:59Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/10335283",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2067211?v=3",
                "events_url": "https://api.github.com/users/ruriimasu/events{/privacy}",
                "followers_url": "https://api.github.com/users/ruriimasu/followers",
                "following_url": "https://api.github.com/users/ruriimasu/following{/other_user}",
                "gists_url": "https://api.github.com/users/ruriimasu/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ruriimasu",
                "id": 2067211,
                "login": "ruriimasu",
                "organizations_url": "https://api.github.com/users/ruriimasu/orgs",
                "received_events_url": "https://api.github.com/users/ruriimasu/received_events",
                "repos_url": "https://api.github.com/users/ruriimasu/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ruriimasu/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ruriimasu/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ruriimasu"
            }
        },
        {
            "body": "The size of the Whatsapp's node is send in this way:\r\n- The first 4 bits of the first byte are flags\r\n- The last 4 bits of the first byte and the two bytes consecutives are the size.\r\n\r\nThe problem is that now WhatsAPI lost the first 4 bits of the size. You haven't got problems because the size of the nodes are smaller than 2^8. If the node would be like this:\r\n0000 0010  xxxx xxxx  xxxx xxxx \r\n0000 would be flags\r\n0010  xxxx xxxx  xxxx xxxx would be the size and whatsAPI only would take  xxxx xxxx  xxxx xxxx.",
            "created_at": "2012-11-13T19:08:23Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/158#issuecomment-10338582",
            "id": 10338582,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158",
            "updated_at": "2012-11-13T19:08:23Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/10338582",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/398668?v=3",
                "events_url": "https://api.github.com/users/ElJava/events{/privacy}",
                "followers_url": "https://api.github.com/users/ElJava/followers",
                "following_url": "https://api.github.com/users/ElJava/following{/other_user}",
                "gists_url": "https://api.github.com/users/ElJava/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ElJava",
                "id": 398668,
                "login": "ElJava",
                "organizations_url": "https://api.github.com/users/ElJava/orgs",
                "received_events_url": "https://api.github.com/users/ElJava/received_events",
                "repos_url": "https://api.github.com/users/ElJava/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ElJava/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ElJava/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ElJava"
            }
        },
        {
            "body": "doing that change i receive xml-not-well formed... so, i think it is not \ncorrect.\n\n\nEl 13/11/12 20:08, ElJava escribió:\n>\n> The size of the Whatsapp's node is send in this way:\n>\n>   * The first 4 bits of the first byte are flags\n>   * The last 4 bits of the first byte and the two bytes consecutives\n>     are the size.\n>\n> The problem is that now WhatsAPI lost the first 4 bits of the size. \n> You haven't got problems because the size of the nodes are smaller \n> than 2^8. If the node would be like this:\n> 0000 0010 xxxx xxxx xxxx xxxx\n> 0000 would be flags\n> 0010 xxxx xxxx xxxx xxxx would be the size and whatsAPI only would \n> take xxxx xxxx xxxx xxxx.\n>\n> —\n> Reply to this email directly or view it on GitHub \n> <https://github.com/venomous0x/WhatsAPI/issues/158#issuecomment-10338582>. \n>\n>",
            "created_at": "2012-11-13T19:29:46Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/158#issuecomment-10339422",
            "id": 10339422,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158",
            "updated_at": "2012-11-13T19:29:46Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/10339422",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1720990?v=3",
                "events_url": "https://api.github.com/users/dleivag/events{/privacy}",
                "followers_url": "https://api.github.com/users/dleivag/followers",
                "following_url": "https://api.github.com/users/dleivag/following{/other_user}",
                "gists_url": "https://api.github.com/users/dleivag/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dleivag",
                "id": 1720990,
                "login": "dleivag",
                "organizations_url": "https://api.github.com/users/dleivag/orgs",
                "received_events_url": "https://api.github.com/users/dleivag/received_events",
                "repos_url": "https://api.github.com/users/dleivag/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dleivag/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dleivag/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dleivag"
            }
        },
        {
            "body": "Yeah...i tried it too. But the lowlevelstudios' link say that.",
            "created_at": "2012-11-13T19:44:46Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/158#issuecomment-10340500",
            "id": 10340500,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158",
            "updated_at": "2012-11-13T19:44:46Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/10340500",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/398668?v=3",
                "events_url": "https://api.github.com/users/ElJava/events{/privacy}",
                "followers_url": "https://api.github.com/users/ElJava/followers",
                "following_url": "https://api.github.com/users/ElJava/following{/other_user}",
                "gists_url": "https://api.github.com/users/ElJava/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ElJava",
                "id": 398668,
                "login": "ElJava",
                "organizations_url": "https://api.github.com/users/ElJava/orgs",
                "received_events_url": "https://api.github.com/users/ElJava/received_events",
                "repos_url": "https://api.github.com/users/ElJava/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ElJava/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ElJava/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ElJava"
            }
        },
        {
            "body": "Welcome\r\nI do not have prior experience in penetration., I want the simplest ways to penetrate the Android operating system. Then penetrate program whatsapp>",
            "created_at": "2012-11-13T21:10:10Z",
            "html_url": "https://github.com/venomous0x/WhatsAPI/issues/158#issuecomment-10343758",
            "id": 10343758,
            "issue_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158",
            "updated_at": "2012-11-13T21:10:10Z",
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/comments/10343758",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2775543?v=3",
                "events_url": "https://api.github.com/users/wiseman1364/events{/privacy}",
                "followers_url": "https://api.github.com/users/wiseman1364/followers",
                "following_url": "https://api.github.com/users/wiseman1364/following{/other_user}",
                "gists_url": "https://api.github.com/users/wiseman1364/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wiseman1364",
                "id": 2775543,
                "login": "wiseman1364",
                "organizations_url": "https://api.github.com/users/wiseman1364/orgs",
                "received_events_url": "https://api.github.com/users/wiseman1364/received_events",
                "repos_url": "https://api.github.com/users/wiseman1364/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wiseman1364/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wiseman1364/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wiseman1364"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158/comments",
    "created_at": "2012-11-10T17:18:35Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2767229?v=3",
                "events_url": "https://api.github.com/users/lilezek/events{/privacy}",
                "followers_url": "https://api.github.com/users/lilezek/followers",
                "following_url": "https://api.github.com/users/lilezek/following{/other_user}",
                "gists_url": "https://api.github.com/users/lilezek/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lilezek",
                "id": 2767229,
                "login": "lilezek",
                "organizations_url": "https://api.github.com/users/lilezek/orgs",
                "received_events_url": "https://api.github.com/users/lilezek/received_events",
                "repos_url": "https://api.github.com/users/lilezek/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lilezek/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lilezek/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lilezek"
            },
            "commit_id": null,
            "created_at": "2012-11-13T17:41:59Z",
            "event": "mentioned",
            "id": 29415798,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/29415798"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2767229?v=3",
                "events_url": "https://api.github.com/users/lilezek/events{/privacy}",
                "followers_url": "https://api.github.com/users/lilezek/followers",
                "following_url": "https://api.github.com/users/lilezek/following{/other_user}",
                "gists_url": "https://api.github.com/users/lilezek/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lilezek",
                "id": 2767229,
                "login": "lilezek",
                "organizations_url": "https://api.github.com/users/lilezek/orgs",
                "received_events_url": "https://api.github.com/users/lilezek/received_events",
                "repos_url": "https://api.github.com/users/lilezek/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lilezek/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lilezek/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lilezek"
            },
            "commit_id": null,
            "created_at": "2012-11-13T17:41:59Z",
            "event": "subscribed",
            "id": 29415799,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/29415799"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/398668?v=3",
                "events_url": "https://api.github.com/users/ElJava/events{/privacy}",
                "followers_url": "https://api.github.com/users/ElJava/followers",
                "following_url": "https://api.github.com/users/ElJava/following{/other_user}",
                "gists_url": "https://api.github.com/users/ElJava/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ElJava",
                "id": 398668,
                "login": "ElJava",
                "organizations_url": "https://api.github.com/users/ElJava/orgs",
                "received_events_url": "https://api.github.com/users/ElJava/received_events",
                "repos_url": "https://api.github.com/users/ElJava/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ElJava/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ElJava/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ElJava"
            },
            "commit_id": null,
            "created_at": "2012-11-13T17:41:59Z",
            "event": "mentioned",
            "id": 29415800,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/29415800"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/398668?v=3",
                "events_url": "https://api.github.com/users/ElJava/events{/privacy}",
                "followers_url": "https://api.github.com/users/ElJava/followers",
                "following_url": "https://api.github.com/users/ElJava/following{/other_user}",
                "gists_url": "https://api.github.com/users/ElJava/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ElJava",
                "id": 398668,
                "login": "ElJava",
                "organizations_url": "https://api.github.com/users/ElJava/orgs",
                "received_events_url": "https://api.github.com/users/ElJava/received_events",
                "repos_url": "https://api.github.com/users/ElJava/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ElJava/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ElJava/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ElJava"
            },
            "commit_id": null,
            "created_at": "2012-11-13T17:41:59Z",
            "event": "subscribed",
            "id": 29415801,
            "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/events/29415801"
        }
    ],
    "events_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158/events",
    "html_url": "https://github.com/venomous0x/WhatsAPI/issues/158",
    "id": 8263631,
    "labels": [],
    "labels_url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 158,
    "state": "open",
    "title": "Losing 4 bits of size on nodes.",
    "updated_at": "2012-11-13T21:10:10Z",
    "url": "https://api.github.com/repos/venomous0x/WhatsAPI/issues/158",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2767229?v=3",
        "events_url": "https://api.github.com/users/lilezek/events{/privacy}",
        "followers_url": "https://api.github.com/users/lilezek/followers",
        "following_url": "https://api.github.com/users/lilezek/following{/other_user}",
        "gists_url": "https://api.github.com/users/lilezek/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lilezek",
        "id": 2767229,
        "login": "lilezek",
        "organizations_url": "https://api.github.com/users/lilezek/orgs",
        "received_events_url": "https://api.github.com/users/lilezek/received_events",
        "repos_url": "https://api.github.com/users/lilezek/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lilezek/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lilezek/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lilezek"
    }
}